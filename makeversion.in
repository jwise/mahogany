# makeversion.in for M root directory
# provides version and patchlevel information
# $Id$

M_VERSION_MAJOR=0
M_VERSION_MINOR=60
M_RELEASE=0
M_PATCHLEVEL=0

rm -f makeversion
cat <<EOF >makeversion
# Mahogany version/release/patchlevel
M_VERSION_MAJOR	:= $M_VERSION_MAJOR
M_VERSION_MINOR	:= $M_VERSION_MINOR
M_RELEASE	:= $M_RELEASE
M_PATCHLEVEL	:= $M_PATCHLEVEL
EOF

rm -f conftmp
cat <<EOF >conftmp
// //// //// //// //// //// //// //// //// //// //// //// //// //// //// //////
// Project:	Mahogany
// File name:	version.h - contains the M version and patchlevel
// Purpose:	provide version and patchlevel information
// Copyright:	(c) 1998 Vadim Zeitlin <zeitlin@dptmaths.ens-cachan.fr>
// Licence:	M license
// //// //// //// //// //// //// //// //// //// //// //// //// //// //// //////

#ifndef _M_VERSION_H
#define _M_VERSION_H

// ----------------------------------------------------------------------------
// version info constants
// ----------------------------------------------------------------------------

/// version info
#define M_VERSION_MAJOR		$M_VERSION_MAJOR
#define M_VERSION_MINOR		$M_VERSION_MINOR
#define M_VERSION_RELEASE	$M_RELEASE
#define M_PATCHLEVEL		$M_PATCHLEVEL
#define M_VERSION_STATUS	"" // "a"=alpha

/// short version string (it should always have this format!)
#define M_VERSION		"$M_VERSION_MAJOR.$M_VERSION_MINOR"

/// full version string
#define M_VERSION_STRING	"$M_VERSION_MAJOR.$M_VERSION_MINOR 'Redmond'"

#endif //_M_VERSION_H
EOF
exec rm -f conftmp	### FIXME - generate Mversion.h as well
if cmp -s conftmp include/Mversion.h
then    rm -f conftmp
else    mv conftmp include/Mversion.h
fi
exit
