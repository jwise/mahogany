-*- text -*-
TODO list for Mahogany
$Id$


*********************************************************************
*** BUGS
*********************************************************************
*SEV PF WHO	DESCRIPTION
*********************************************************************
9	KB	Expunge doesn't update folder listing anymore
9	KB	When retrieving only N our of M messages, Mah. will
		later say that there are M-N new messages :-(
9	KB	wxLayout editing glitches & cursor positioning bug
		selections via keyboard still broken
		speed up wxLayout scrollbar setting, *way* too slow
		now
5	KB	for NNTP only count unread/new messages
4		Change "only retrieve first X messages" dialog box:
		1. make it more intuitive (yes/no switch)
		2. add a [Cancel] button to abort retrieval
9		changing properties for IMAP folder (auto-collect)
		occasionally dumps core on [OK] click
8	VZ?     After a dialog was opened (e.g. wxModulesDialog), the
		app won't termiante but keeps running without windows.

6 gtk   VZ?     The force-reopen checkbox doesn't display its
		tooltip. Does this work under MSW? A wxGTK bug?
7 gtk		Mahogany occasionally doesn't terminate but remains in
		gtk event loop without any open windows.
6	VZ	All Folder create dialog pages have no HelpIDs set.
5	KB	make MailFolder timer react to options change
5	KB	(optionally, but on by default) expunge deleted messages when
		the folder is closed - as noticed in 32bitonline comparison,
		otherwise it's a nuisance.
3		foldername in password prompt seems wrong
3		URL highlighting in headers is missing (e.g. X-Url)
? win	VZ	lock files are sometimes left
2 win	VZ	keyboard navigation is somewhat strange in the options
		dialog, can't TAB to the buttons from the notebook
		page
2		adb addressbook extension appears twice when new book
		is created
3	VZ?	Why doesn't the tooltip in wxMFolderDialogs.cpp work?
5	VZ	custom headers are not inherited

4 gtk	VZ	icon selector suffers from several appearance problems
3 gtk	??	menu acceleratos don't work if we process char events

4	KB	Also, why "hide" parameter to all wxComposeView::CreateXXX()
		functions is ignored - is it used anywhere?

*********************************************************************
*** PROJECTS
*********************************************************************
* PRI	WHO	DESCRIPTION
*********************************************************************

9	KB	Change/Finish ASMailFolder API for subscription management.
		---> Add a "find text in folder" method, too, trivial.

9	KB	Profile: add enumeration of entries for profile and
		its subgroups

5	KB	forward text-only messages as text rather than rfc822

8	VZ	make the message templates work: GUI suport for configuring them
		and (many) more macros should be added.

8		support of different charsets:
		a) allow configuring them for outgoing messages
		b) automatically choose the correct one and display the message using
		   the right encoding for the incoming ones

7	KB	Find all possible MT problems in MailFolder.cpp and
		put mutexes around them.
7	VZ	document the new properties dialog entries/pages, please
	KB	which ones are undocumented? It seems like everything is there...

7	KB	write more on tutorial bit in Manual.lyx
6		simple HTML import for wxLayout
6		threading via References header
5		integrate wxHTML for help and HTML viewing
6	VZ	Could you please add a file-browse button/dialog to
		the folder selection dialog and modify its return
		value to somehow indicate that a file rather than a
		folder name was selected?
		I'll then add support for that to the Copy/Move
		Messages functions. (KB)
6	VZ	Could you add an ADB/export function, too? A
		"checklist" (however that thing was called) box to
		choose the fields and their order and which separator
		to use would be nice.
8		Find out where Mahogany is when laying out really long 
		text messages. How can we speed this up? Why do
		redraws take long, too?
7		dnd for messages between folders and treectrl
6	KB	implement temporary/fake Profile mode
5		add goto_next_unread to folderview
5		add more buttons to folderview, such as
		next/previous/goto_next_unread
5	VZ?	Add DND for messages between folders
5	?	Add DND for MIME content from composeView/messageView
                to file managers
6	KB	completion of filtering rules/scoring code
6	KB	implement listing of folders on remote
		servers/subscription API
4	CB	GPG/PGP support
5	KB	Fix MessageCC(const String &) constructor.
4	KB	eval wxHTML for help system and as built-in HTML viewer
4		add option to force wrapping of messages in viewer
5	VZ	when installing, create a welcome message in "New
		Mail". Also, create a default address book with
		m-users/m-developers entries in it. Also add entry for
		autocollect book. Wait for MessageCC(const String &)
		constructor.
4	VZ	add wxWizard for the first time run
3	VZ	add tips on startup (a wxTipDialog class?)

4		improve key bindings for message editor, page up/down
		whole page
2	KB	add sub-directories support for different icon sets to 
		wxIconManager, e.g. small/large style
		More icons needed: INBOX, PopServer, IMAPServer,
		FolderGroup, NewMail, SentMail, small icons (16x16) for the
		custom headers dialog, AdbImport.

3	VZ	XFaces under Windows?
		KB: no problem if you can read XPMs, use the lib included

2		different icon for activity log frame
2	VZ?	make activity log frame appear on demand only

2	VZ	printing from ADB
3	VZ	"GoTo"  the entry should expand the branch which contains it
3	VZ	LDIF format import

3		a useful feature: change POP/IMAP password for the folder.

2		fix es.po - many little errors
2	KB	optionally activate tearoff menus

from 32bitsonline review:
4		Trash folder, move to trash instead/alternative of of delete
4		Message menu popup for folderlistctrl
4		add option to hide messages marked as deleted
4		in that case ask for auto-expunge on folder close

2		Add code to collect split-up mime content from
		multiple messages and decode it.

4		Option to hide certain folders in treectrl, e.g. the
		auto-collect ones
4		reply unquoted, too
4		composeview clear should re-insert signature
4		auto-expunge on folder close option
4		option to hide expunged messages
4		confirm expunge dialog

*********************************************************************
*** TESTS
*********************************************************************
* PRI	WHO	DESCRIPTION
*********************************************************************

5	KB	properties dialog forgets IMAP mailbox name
5	KB	check handling of missing hostnames,
5	KB	network page
5	KB	folder properties for advanced user
5	KB	POP/IMAP server/localhost default values

3	VZ	dialog to edit message headers in composeview,
5	KB	if message is quoted-printable unquote it before
                saving to file (how stupid!) same for encbinary
				.... working on it right now

4	VZ	test ADB importing more

5	KB	Could you have a look at the setting of the default
		columns sizes in wxFolderView.cpp, please?

		VZ: I fixed a buglet in your code and it seems to work ok now.
		    Although it's not exactly elegant, it seems to do what you
		    want (personally, I would prefer if it inherited from the
		    root folder, why "New Mail"?). Please test it and tell me
		    more if it doesn't do what you want.

6	VZ	folder properties assert when trying to create a
		subfolder under INBOX - sort of fixed because folders can't be
		created under INBOX (or any other non group folder) any more.



KB:
I have started marking code with
//FIXME WXCOMPATIBILITY
if it is likely to depend on a post-release wxWindows version. Such
code should be protected with a suitable #ifdef which should be
removed later when wxWindows has been updated.



*********************************************************************
*** GENERAL TODO
*********************************************************************

- support for working offline (will need wxWin API modifications?)
- subscription management for NNTP/IMAP/newsspool
- DND with KDE/Gnome filemanagers (now supported by wxGTK)
- Templates/style-sheets for message composition and flexible reply
  handling
- Messages sorting, threading, scoring and searching
- there should be no [Expand] button in "Post news message" window,
  or may be there should be [choose newsgroup] one instead.
-HTML mail
- eventually add a Drafts folder and toggable Online/Offline mode
- add icons to doc++ generated docs
- add new mail and group reply/followup buttons (and menu entry for
   the latter) to folderview
- move setting of -fPIC to configure


- check whether focus handling in folderview is fine now, does it get
  lost after update() ?

- add button to browse for filename in folder selection dialog (asked
  vadim for this)
- TUTORIAL, how to keep multiple folders open
- if time permits: vcard-import

- document python callback behaviour for incoming folders, possibly do
  testing for callback results in CollectOneFolder!!
- add configure option for python path
- more configurability for news
- do we really need to scan /var/lib/news/active?
- add address auto collection to compose view
- some html mail import/filtering of tags (easy, quick and dirty)
- Problem: mail uids and nums are long, WXARRAYINT.Count() is int,
  content is int.
- do not redraw messageview if the message is the one currently being
  shown (DONE, better:)
  -- option to keep wxLayoutList around for reuse?
- when inserting filetype of unknown MIME type, prompt for it
- speed up copy mail to folder by cusing c-client functionality
- wxComposeView: if replying, only mark message as answered if reply
  got sent --> difficult/ after ASMailFolder is there
- update c-client patch several changes in smpt.c/rfc822.c
- obtain a full IMAP tree as part of subscription management
- move to scandoc instead of doc++??
- add calendar tool/plugin
- if exists, use /etc/M.conf or /etc/Mahogany.conf instead of
  prefix/Mahogany/M.conf.
- merge in settings from some remote location, possibly using ftp/http
- use wxHtmlHelp classes ? use gtkxmhtml widget?

- add SIGSEGV handler for safe exit, to attempt and safe things
  + VZ: this should pass by wxWindows, my old idea about wxApp::OnException().

- when inserting filetype of unknown MIME type, prompt for it,
  possibly have a MIME types editor (similar to netscape's?)
 - possibly have a MIME types editor (similar to netscape's?)
 - easy: add support for email-to-fax gateway at www.tpc.int and
   their coverpage
 - document scripts in extra/scripts
 - somehow allow different configs for different hosts, maybe a
   [M/HOSTNAME/Profiles] section overriding [M/Profiles]?
 - toggle readonly status of mailboxes?
 - GUI problems:
  - folder tree control should (configurable on a per-folder basis)
    highlight and count the number of new messages
  - add "Inline" option for MIME popup on graphics

- ADB:
  + add "add current address to ADB" to compose view
  + should be updated when new entries are created (can't be deleted from
    elsewhere for now...), add an event for this
  - fix remaining BBDB/ADB problems (low priority)

- alternative treecontrol instead of listctrl for folderview
  + VZ: don't think it's a good idea, too confusing to the user

- use wxURL to retrieve remote configuration files and import them,
  maybe even retrieve files to use as folders or address books`?

- wxFolderCreateNotebook should be split into base class and 2 derivations:
  wxFolderCreateNotebook and wxFolderPropNotebook

- drag and drop of messages between folders
- Are wxConfig/Profile GetNextGroup()/GetFirstGroup()  thread-safe??
  I started marking possible problems for multi-threaded code with
  //FIXME:MT
  VZ: ok, I usually do it too (always) except for the "obvious" problems, e.g.
      usage of static vars. I always name them with "s_" prefix (for this
      reason too) so it should be quite easy to do a grep for them later
  - MT-problem: rfc822_extraheaders()

- add "Send Digest"
- add "Send bug report"

- detect one's own messages (i.e. mark "Myself" in "From:" or, as XFMail
  does, mark "To: ..." in "From:" column for them) and optionally suppress them
  completely.

- add !(command) expansion to wxConfig, i.e.
  VAR=!(hostname):me would execute "hostname" and return "hydra.medieval.de:me"

- only quote the selected text in reply/forward if there is any selection
  (as in XFMail) - very handy
- "Syntax highlighting" for replies

  + implement "internal clipboard" for
    - cut-&-paste
    - drag-&-drop

- UI things
  + we should somehow merge the toolbars into the main frame toolbar if it
    shows the folder view, for example
  + session management --> should be done on wxWindows level

- Python
  + fix Python problems -- what's wrong? No idea why Setup.py doesn't work.
  + add remaining (important) interface definitions
  + user/global Minit files, security issues
  + merge in wxPython (Robin Dunn wanted to help...)

- event subsystem
  + write some macros for safe casting of the event param in the handlers to
    the correct type
  + separate "folder tree change" event in "pre" and "post" kind
  + maybe introduce return values?

- news reader functions
  + get the list of newsgroup and allow to choose from them
  + "catch up" command
  + filtering of cross posted articles - would be very nice if this could be
    also used to filter the copies of received mail messages (i.e. if a
    message is sent to the mailing list and cc'd to me I'd like to read it
    only once)
  + "killfile" features and a special "quick kill" (TM) feature which would kill
    all articles of the author of the selected one

- Use configure to check for utilities, like help browser. "ReConfigure" menu.

- Edit-CC, CC messages to others but edit the individual copies before sending

- threading of messages via MessageId/References header lines
  Follow examples in SunExpert journal.

- "Power Search": search all (even compressed?) folders for a keyword
  and when found, open the folder and display the message.

- Export and import of addressbook in text format.
  I'd like a feature to select fields from the addressbook and write
  them, e.g. semicolon separated as a list to a file, so one could
  parse them in scripts or whatever else.

- message integrity verification support
  + PGP
  + MD5 (see RFC-1544 for details)

- Support for different charsets (Unicode/utf-7/8?)
  Being added to wxWindows at present.

- REMOTE-CONTROL: add support for popping window open and reading a folder of one's choice
  (for being controlled from xbiff like programs)
  idea: listen() on a socket and write socket number to a file ~/.M/socket
  Relatively simple.

- LDAP -- possibly using python ldap module or OpenLDAP.

- automatic (but optional) mail compactification (to save disk space)?
  -> this could be done using scripts?

- creation of separate index files for mail folders

- compressed mail folders / possibly together with index files

*********************************************************************
*** CHANGELOG SINCE LAST REVISION / TESTED AND FINE
*********************************************************************
5	KB	group reply/followup functionality
5	KB	clicking in startup dialog no longer causes crash
5	KB	check mail now in File... menu
5	KB	check "Unread" status flag

vi: set si ts=8 sw=8 noet nolist tw=80:
