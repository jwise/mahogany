#expr	reject	3 + 5 +
#expr	reject	9 * (7 - 2

# unary
expr	-1	-1
expr	1	+1
expr	0	!1
expr	1	!0
expr	9	arg(9)
expr	0	nargs()
expr	1	nargs("one")
expr	2	nargs("one", 2)
expr	1	(1)
expr	-1	-(1)
expr	1	--(1)
expr	1	--1

# factor
expr	99	9 * 11
expr	11	99 / 9
expr	1	10 % 9

# term
expr	11	7 + 4
expr	9	11 - 2

# assoc
expr	6	(9 - 5) + 2
expr	2	9 - (5 + 2)
expr	6	9 - 5 + 2
expr	45	(2 + 7)*5
expr	37	2 + (7*5)
expr	37	2 + 7*5
expr	37	7*5 + 2

# relational
expr	1	1 == 1
expr	1	1 = 1
expr	0	1 == 0
expr	1	"a" == "a"
expr	0	"a" == "b"
expr	0	1 != 1
expr	0	1 <> 1
expr	1	1 != 0
expr	0	"a" != "a"
expr	1	"a" != "b"

expr	1	9 > 7
expr	0	7 > 9
expr	0	7 > 7
expr	0	"a" > "z"
expr	1	"z" > "a"
expr	0	"z" > "z"
expr	1	7 < 9
expr	0	9 < 7
expr	0	7 < 7
expr	1	"a" < "z"
expr	0	"z" < "a"
expr	0	"z" < "z"
expr	1	9 >= 7
expr	0	7 >= 9
expr	1	7 >= 7
expr	0	"a" >= "z"
expr	1	"z" >= "a"
expr	1	"z" >= "z"
expr	1	7 <= 9
expr	0	9 <= 7
expr	1	7 <= 7
expr	1	"a" <= "z"
expr	0	"z" <= "a"
expr	1	"z" <= "z"

expr	1	7 == 9 - 2
expr	1	7 + 2 == 9
expr	0	7*5 + 2 != 37

# ands
expr	1	9 && 7
expr	1	7 & 3
expr	0	1 && 0
expr	0	0 && 1
expr	0	0 && 0

expr	1	9>7 && 11>9
expr	0	9<7 && 11>9
expr	1	7 == 9 - 2 && 7 + 2 == 9

# ors
expr	1	1 || 1
expr	1	1 | 1
expr	1	1 || 0
expr	1	0 || 1
expr	0	0 || 0

expr	1	9>7 || 11>9
expr	1	9<7 || 11>9
expr	0	7 != 9 - 2 || 7 + 2 != 9

# query
expr	9	9 > 7 ? 9 : 7
expr	7	9 < 7 ? 9 : 7
expr	5	9 < 7 ? 9 : 7 < 5 ? 7 : 5
expr	7	9 < 7 ? 7 < 5 ? 7 : 5 : 7

# block
# although all the standard functions are recognized, we must be careful
# to only use those that do not refer to the mailbox or we will crash.
#??	pgm	0	{}
pgm	9	{ arg(9); }
pgm	9	{{ arg(9); }}
pgm	9	{{{ arg(9); }}}
pgm	0	{ nargs(); }
pgm	1	{ nargs(1); }
pgm	2	{ nargs("one", "two"); }
pgm	1	{ nargs(); nargs("one", "two"); nargs("only one"); }

# if/else
pgm	0	if (9 < 7) { nargs(1,2,3); }
pgm	3	if (9 > 7) { nargs(1,2,3); }
pgm	2	if (9 < 7) { nargs(1,2,3); } else { nargs(1,2); }
pgm	3	if (9 > 7) { nargs(1,2,3); } else { nargs(1,2); }
pgm	0	if (9 < 7) { arg(1); } else if (9 < 7) { arg(2); }
pgm	2	if (9 < 7) { arg(1); } else if (9 > 7) { arg(2); }
pgm	3	if (9 < 7) { arg(1); } else if (9 < 7) { arg(2); } else { arg(3); }

# filter list
pgm	9	{ arg(3); } { arg(9); }
pgm	9	if (9 < 7) { nargs(1,2,3); } else { arg(3); } { arg(9); }
pgm	2	{ arg(9); } if (9 > 7) { nargs(1,2); } else { arg(3); }

# real filters, generated by the GUI
# we only accept these, since running them will cause a crash
pgm	accept	if((containsi(subject(),"[M-Dev]"))|(containsi(subject(),"[M-User]"))){setcolour("medium blue");}
pgm	accept	if(((now()-date()) > "7")){delete();}
pgm	accept	if(((now()-date()) > 7)){delete();}

#pgm	reject	{ nargs() }
#pgm	reject	{ nargs(); )
