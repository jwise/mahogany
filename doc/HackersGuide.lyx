#LyX 1.1 created this file. For more info see http://www.lyx.org/
\lyxformat 2.15
\textclass book
\begin_preamble
\usepackage{html, epsfig}
\makeatletter
\end_preamble
\language default
\inputencoding default
\fontscheme palatino
\graphics default
\paperfontsize 12
\spacing single 
\papersize letterpaper
\paperpackage a4
\use_geometry 0
\use_amsmath 0
\paperorientation portrait
\secnumdepth 2
\tocdepth 2
\paragraph_separation indent
\defskip medskip
\quotes_language english
\quotes_times 2
\papercolumns 1
\papersides 1
\paperpagestyle default

\layout Title
\added_space_top vfill \added_space_bottom vfill 

\shape slanted 
Mahogany Hacker's Guide
\shape default 
 
\newline 
for Version 0.23a
\newline 

\begin_inset Quotes eld
\end_inset 

Polwarth III
\begin_inset Quotes erd
\end_inset 


\layout Author

Copyright 1997-1999 by Karsten Ballüder 
\newline 
 Written by Karsten Ballüder and Vadim Zeitlin
\newline 

\family typewriter 
<mahogany-developers@lists.sourceforge.net>
\layout Standard


\begin_inset LatexCommand \tableofcontents{}

\end_inset 


\layout Chapter

Compiling 
\shape slanted 
Mahogany
\shape default 
 from source
\layout Standard

These compilation notes are probably a bit outdated.
 The best start is to use the 
\family typewriter 
--help
\family default 
 option of configure to see which options it supports.
 These notes are written with the Unix version in mind, for problems with
 compiling the MS Windows or MacOS versions, you might want to contact the
 mahogany-users@lists.sourceforge.net mailing list instead.
\layout Section

General Procedure
\layout Subsection

Prerequisites
\layout Standard

Before you can compile Mahogany, you will need a matching copy of 
\latex latex 

\backslash 
htmladdnormallinkfoot{wxWindows}{http://www.wxwindows.org/} 
\latex default 
.As wxWindows/wxGTK is under constant development, you should use the same
 copy of wxGTK that we used to build Mahogany, you can get it from the 
\latex latex 

\backslash 
htmladdnormallinkfoot{Mahogany download page}{http://mahogany.sourceforge.net/down
load.html}
\latex default 
.
\layout Subsection

Configuring wxGTK
\layout Subsubsection

Unpack wxGTK and run its 
\family typewriter 
configure
\family default 
 script:
\layout Quote

wxGTK's configure system is a bit complicated, but easy to use once you
 see how to.
 If you are using the sources from the CVS repository or the snapshot from
 the Mahogany ftp server, please follow the instructions in the file wxWindows/B
uildCVS.txt.
 Generally this involves setting up a subdirectory for building it and invoking
 the configure script:
\layout Quote


\family typewriter 
mkdir build 
\layout Quote


\family typewriter 
cd build
\layout Quote


\family typewriter 
../configure --without-threads --with-gtk --without-shared --without-debug_flag
\newline 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
--without-debug_info --without-odbc
\layout Quote


\family typewriter 
make
\layout Quote


\family typewriter 
make install
\layout Quote

If compiling with gtk 1.0.x rather than 1.2.x, you need to specify the additional
 option 
\family typewriter 
--without-dnd
\family default 
.
 Of course, feel free to change the two debug options to 
\family typewriter 
--with-debug
\family default 
 if you want to generate a version with debugging enabled.
 Just make sure that if you configure wxGTK with debug, then you also need
 to configure Mahogany 
\family typewriter 
--with-debug
\family default 
, or it will fail.
 If you experience problems with thread support, configure it 
\family typewriter 
--without-threads
\family default 
, they are not used currently.
 
\shape italic 
Note: the --with/--without arguments are prefixed with a double hyphen,
 not just a single one, as it might show up in some version of this document.
\layout Quote

More up-to-date information can be found in Mahogany's README file.
 
\layout Subsection

Configuring Mahogany
\layout Standard

This is even easier than with wxGTK.
 Just run Mahogany's 
\family typewriter 
configure
\family default 
 script.
 If you have built wxGTK with debugging enabled, specify the additional
 option 
\family typewriter 
--with-debug
\family default 
 when configuring Mahogany.
 Call 
\family typewriter 
./configure --help
\family default 
 to get a list of supported options.
 Generally you will just run it without options.
 If configure fails to find some header files or libraries, you can create
 links to them in the 
\family typewriter 
extra/include
\family default 
 and 
\family typewriter 
extra/lib
\family default 
 directories and configure will find them.
 To reconfigure Mahogany, make sure that you delete any 
\family typewriter 
*cache*
\family default 
 files first.
 If you have multiple versions of wxGTK installed, you can set the 
\family typewriter 
WX_CONFIG
\family default 
 environment variable to tell 
\family typewriter 
configure
\family default 
 which 
\family typewriter 
wx-config
\family default 
 program to call.
 
\shape italic 
Note: the --with/--without arguments are prefixed with a double hyphen,
 not just a single one, as it might show up in some version of this document
\layout Standard

What to do, step by step:
\newline 

\family typewriter 
./configure --help 
\newline 
./configure with options as described above
\newline 
make depend
\newline 
make
\newline 
make install
\newline 
make install_all
\layout Subsection

Compiling Mahogany
\layout Standard

Just run 
\family typewriter 
make
\family default 
 from the top level Mahogany directory.
 If you later want to rebuild Mahogany without rebuilding the libraries
 contained in the 
\family typewriter 
extra/src
\family default 
 directory, i.e.
 after changing the Mahogany source, just run 
\family typewriter 
make
\family default 
 in the 
\family typewriter 
src
\family default 
 directory.
\layout Subsubsection

To generate the documentation
\layout Standard

...type 
\family typewriter 
make doc
\family default 
 from the main directory or simply 
\family typewriter 
make
\family default 
 in the doc directory.
\layout Subsection

Installing Mahogany
\layout Standard

Just call any or all of the following make targets in the main directory:
\layout Subsubsection

make install
\layout Standard

Will compile and install Mahogany and the required additional files.
\layout Subsubsection

make install_doc
\layout Standard

Will install and, if necessary, regenerate the documentation and online
 help system.
\layout Subsubsection

make install_locale
\layout Standard

Will attempt to generate message catalogs for translations and install them.
 Note that Mahogany is not fully translated yet.
\layout Subsubsection

make install_all
\layout Standard

Will do all of the above
\layout Subsection

Some extra software might be required
\layout Standard

For regenerating the documentation you will need 
\family typewriter 
doc++
\family default 
 for generating the class documentation.
 Alternatively the Makefile system will try to use kdoc or scandoc (included),
 but might fail halfway during class documentation generation.
 Also, latex, latex2html, netpbm and plenty of disk space on 
\family typewriter 
/tmp
\family default 
 are required for generating the online docs.
 However, the distribution includes a file Mdoc.tar.gz in the doc directory.
 As long as you leave this file there, the Makefile will not attempt to
 regenerate the documentation but use this instead.
\layout Section

Operating systems specific
\layout Subsection

Linux
\layout Standard

If compiling with a non-default compiler like 
\family typewriter 
egcs
\family default 
, make sure that 
\family typewriter 
/usr/include
\family default 
 is not in the include path, neither should 
\family typewriter 
/usr/lib
\family default 
 be explicitly listed.
 Mahogany has been compiled with 
\family typewriter 
egcs
\family default 
 and 
\family typewriter 
gcc-2.8.x
\family default 
 on both, 
\family typewriter 
libc5
\family default 
 and 
\family typewriter 
glibc2
\family default 
 systems.
\layout Subsection

Solaris/SunOS
\layout Standard

Mahogany has been successfully compiled with 
\family typewriter 
gcc-2.8.0
\family default 
 on Solaris.
 Currently it does not compile with the standard 
\family typewriter 
C++
\family default 
 compiler.
\layout Subsection

Microsoft Windows 
\layout Standard

Mahogany can be compiled under Windows, using wxWindows Version 2.0 and Microsoft
 Visual C++ version 4.x or later.
 The makefiles are included in the Mahogany source distribution (they will
 build the version of Mahogany without Python support).
\layout Enumerate

Prerequisites: 
\begin_deeper 
\layout Enumerate

You need the Mahogany sources.
 You may either download them from one of the locations mentioned in README
 file or use the cvs (preferred because it will allow us to fix reported
 bugs and for you to test our fixes faster)
\layout Enumerate

You need the sources of wxWindows cross-platform GUI library used by Mahogany:
 get it from either Mahogany home page or directly from http://www.wxwindows.org.
\layout Enumerate

You need a compiler capable of creating Win32 executables.
 Although, in principle, any one will do, we only provide makefiles for
 Microsoft Visual C++ - for other compilers you would need to create them
 yourself.
\layout Enumerate

The *source* distribution of Python 1.5 if you want to build Mahogany with
 Python support (if you don't know what Python is, you don't need it).
\layout Enumerate

You need quite a lot of time: on a slow machine (average CPU, IDE disk subsystem
) the compilation might take a long time (on the order of 30 minutes - one
 hour counting with wxWindows)
\end_deeper 
\layout Enumerate

Building wxWindows: 
\newline 
This is documented in wxWindows documentation.
 The makefiles and/or project files are provided for all major compilers
 (including Microsoft, Borland, Symantec, Watcom and g++ for Win32 (mingw32)).
 You will need almost all features of the library, so don't edit setup.h
 and leave the default settings in it.
 The important moment is to realize that the program should be built later
 with the same compile-time options and compiler settings as the library
 - if they are not identical, weird and difficult to diagnose problems will
 result! It is recommended (although not mandatory) that you use project
 files and not the command-line makefiles to build wxWindows if you are
 using Visual C++ compiler.
\newline 
Although wxWindows itself doesn't need it, you should define an environment
 variable WX with the path to the root directory of wxWindows installation
 (for example: set wx=d:
\backslash 
progs
\backslash 
libs
\backslash 
wxWindows).
 
\layout Enumerate

Building Mahogany with Visual C++ 6.0
\newline 
Open the file M.dsw in MSDEV.EXE (IDE).
 This is the main workspace file for Mahogany and it contains several projects
 (you may get warnings about some projects being missing - don't worry):
 
\begin_deeper 
\layout Enumerate

wxWindows project: you probably don't have it in the same place, so just
 ignore the warnings and either leave it unloaded or delete it from the
 workspace if you wish.
 You may also modify the path to the project file (wxWindows.dsp) to point
 to the project file you used to build wxWindows if this is how you built
 it - then you will profit from automatic dependencies between projects.
\layout Enumerate

C-Client project: this is the library which is included in Mahogany distribution
 and which must be built as well.
 Load the project (right click it with the mouse, choose "Load") and it
 will be done automatically the first time you build Mahogany.
\layout Enumerate

compface is the library for the X-Face support: follow the same instructions
 as above.
\layout Enumerate

MModule project: this project contains the loadable modules for Mahogany
 ("plug-ins").
 They are in experimental state right now and you may compile Mahogany without
 them for now.
\layout Enumerate

python15 project: if you have installed source distribution of Python, you
 should have this file in it.
 When you will try loading the project, you will have a possibility to browse
 for puthon15.dsp file - select the one from the Python distribution.
 If you don't have Python, leave it unloaded.
\layout Enumerate

Any other projects in the workspace shouldn't be used and should be left
 unloaded.
\layout Enumerate

After loading the ones which you need (C-Client is mandatory, all the other
 optional), you may start the build.
 It should succeed :-) If it doesn't, please report the build log with the
 explanation of what happened to mahogany-users@lists.sourceforge.net
 mailing list.
\layout Enumerate

Notice that the environment variable WX must be set before you launch MSDEV.EXE
 (otherwise it won't inherit it)! 
\end_deeper 
\layout Enumerate

Building Mahogany with Visual C++ 5.0 
\newline 
Edit the workspace file wxWindows.dsw with a text editor and replace the
 string "Format Version 6.00" with "Format Version 5.00".
 Then proceed as above.
\layout Enumerate

Building Mahogany with other compilers
\newline 
It should be possible to do it, but I don't have all Windows compilers installed
 on my system, so I cannot guarante it.
 Most probably, you might need some minor tweaks, but almost surely no major
 changes will be needed.
\newline 
The list of all Mahogany source files can be found by looking at the Makefile
 files in each subdirectory of src: SRC variable there contains all the
 source files in that directory.
 
\newline 
Add all of the sources to the makefile/project file and also add the resource
 file res/M.rc to the project, choose the same options as for wxWindows compilati
on and see what happens.
 If it doesn't work, send you questions to the usual place (mahogany-developers@
lists.sourceforge.net).
 If it does work, please tell us about it as well so that this file could
 be updated.
\layout Subsection

DEC Alpha with Digital UNIX 3.2c
\layout Standard

(Karsten Ballüder: It seemed at that time that the segmentation fault was
 caused by a bug in wxGTK.
 By now this should be fixed.
 However, no new attempt to compile Mahogany on DEC Unix has been made yet.
 However, I include Holger's report as a help for some future attempt.)
\layout Standard

This section has been contributed by Holger Bauer 
\latex latex 

\newline 

\family typewriter 
\size small 

\backslash 
htmladdnormallinkfoot{bauer@itsm.uni-stuttgart.de}{bauer@itsm.uni-stuttgart.de}
\latex default 
 
\latex latex 

\backslash 
htmladdnormallinkfoot{http://www.itsm.uni-stuttgart.de/~bauer}{http://www.itsm.uni-st
uttgart.de/~bauer}
\layout Enumerate

First I took the following arguments for configure:
\newline 

\family typewriter 
\size small 
configure --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/shlib
 --with-wxGTK --without-python
\newline 

\family default 
This would not work since
\family typewriter 
 make dep 
\family default 
still tries to find 
\family typewriter 
Python.h
\family default 
.
\newline 
Therefore I created a dummy include file Python.h in 
\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/src/Python
\family default 
.
 This helped to complete make dep.
 
\begin_inset LatexCommand \label{item1}

\end_inset 


\layout Enumerate

However step 
\begin_inset LatexCommand \ref{item1}

\end_inset 

 still reported some warnings:
\newline 

\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/extra/src/c-client/mail.h 
\family default 
would complain about a missing 
\family typewriter 
linkage.h
\family default 
 header file.
 Also, a missing 
\family typewriter 
osdep.h
\family default 
 file was reported.
\newline 

\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/extra/src/c-client/osdep.h 
\family default 
falsely pointed to 
\family typewriter 
os_gof.h 
\family default 
but this file was missing.
 Therefore copied
\family typewriter 
 os_osf.h 
\family default 
to
\family typewriter 
 os_gof.h
\family default 
.
 Also, copied
\family typewriter 
 os_osf.c 
\family default 
to
\family typewriter 
 os_gof.c 
\family default 
since 
\family typewriter 
osdepbas.c 
\family default 
pointed to
\family typewriter 
 os_gof.c
\family default 
.
 
\layout Enumerate


\family typewriter 
cd src;
\newline 
make;
\family default 

\newline 
This would fail since swig was not searched for by the configure script.
 Since even I gave --without-python to configure make would search in /src/Pytho
n and try to compile things there I decided to install python and swig.
\layout Enumerate

The Python-FAQ states that python definitely has to be compiled with the
 DEC cc.
\layout Enumerate

After that I took:
\newline 

\family typewriter 
\size small 
configure --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/shlib
 --with-wxGTK
\newline 

\family default 
The make process would then stop in 
\family typewriter 
\size default 
\latex latex 

\backslash 
dots
\latex default 
/M/src/adb/AdbFrame.cpp
\family default 
.
 The line 
\latex latex 

\newline 

\family typewriter 
\latex default 
AdbTreeElement *current = wxIsPathSeparator(strEntry[0u])
\latex latex 

\backslash 
dots
\newline 

\family default 
\latex default 
would not compile since the wxString function takes a long integer (due
 to the 64 bit architecture).
\newline 
This error might disappear if somebody adjusts the wxString library accordingly.
\newline 
In meantime (for my local 
\family typewriter 
libwx_gtk.so
\family default 
) I changed to 
\family typewriter 
strEntry[0]
\family default 
.
\layout Enumerate

Then only final linkage errors occured:
\newline 

\family typewriter 
-lpthread
\family default 
 is not known, needs 
\family typewriter 
-lpthreads
\family default 

\newline 

\family typewriter 
-lcrypt
\family default 
 is not known, just omit
\newline 

\family typewriter 
-ldmalloc
\family default 
 is not known, pass
\family typewriter 
 --without-dmalloc
\family default 
 to
\family typewriter 
 configure
\family default 
.
\layout Enumerate

Because the link process did not give me any error I expected Mahogany to
 run (at least some kind of unstable).
 But a core dump appeared immediately.
\newline 

\family typewriter 
dbx
\family default 
 gives to following information:
\newline 

\family typewriter 
(dbx) run 
\newline 
signal Segmentation fault at >*[mig_get_reply_port, 0x3ff83004a0c] stq r26,
 0(sp) 
\newline 
(dbx) where 
\newline 
> 0 mig_get_reply_port(0xffffffffffffffff, 0xffffffffffffffff, 0xfffffffffffffff
f, 0xffffffffffffffff, 0xffffffffffffffff) [0x3ff83004a0c] 
\newline 

\family default 
The output of 
\family typewriter 
gdb
\family default 
 is not very appealing:
\newline 

\family typewriter 
(gdb) run Starting program: /usr3/bauer/src/M/M/src/M 
\newline 
Program received signal SIGSEGV, 
\newline 
Segmentation fault.
 0x3ff83008f5c in port_allocate ()
\newline 
(gdb) where
\newline 
#0 0x3ff83008f5c in port_allocate () #1 0x3ff83004a38 in mig_get_reply_port
 () 
\newline 
#2 0x3ff83008f94 in port_allocate () #3 0x3ff83004a38 in mig_get_reply_port
 ()
\newline 

\family default 
This output runs until infinity 
\latex latex 

\backslash 
dots
\latex default 
.
\layout Section

Configuration and Testing
\layout Standard

Under Unix all configuration settings are stored in 
\family typewriter 
~/.M/config
\family default 
 under Windows in the registry.
 To get an overview over all possible configuration options and their default
 values, set the value 
\family typewriter 
RecordDefaults=1
\family default 
.
 Under Unix, do this by creating a new 
\family typewriter 
~/.M/config
\family default 
 file containig the lines
\layout Standard


\latex latex 

\backslash 
verb|[M]|
\layout Standard


\latex latex 

\backslash 
verb|RecordDefaults=1|
\layout Standard

After running Mahogany, this file will then contain all default settings.
 Most of them are easily understood.
 Otherwise, the file 
\family typewriter 
include/Mdefaults.h
\family default 
 contains them all with some short comments.
\layout Section

wxWindows
\layout Standard

You will need the wxWindows GUI toolkit to compile 
\shape slanted 
Mahogany
\shape default 
.
\layout Standard

Further Information
\layout Itemize

wxWindows is available from
\latex latex 
 
\family typewriter 
\latex default 
http://www.wxwindows.org/
\layout Itemize

The GTK port of wxWindows, wxGTK, is available from: http://www.wxwindows.org/dl_g
tk.htm
\layout Standard

In order to compile this alpha release of 
\emph on 
Mahogany 
\emph default 
you will need wxWindows 2.0 strictly later than beta 3 and so it is probably
 easier to take the wxWindows sources snapshot from the 
\emph on 
Mahogany
\emph default 
 home page.
\layout Chapter

The Real Hackers' Guide
\begin_inset LatexCommand \label{HackersGuide}

\end_inset 


\layout Standard

Here we are trying to provide some information for existing and potential
 
\shape italic 
Mahogany
\shape default 
 developers.
\layout Section

Profiles
\layout Subsection

Description and Motivation
\layout Standard

Profiles are objects storing configuration information.
 The purpose of using profiles rather than using the normal wxConfig system
 is to have 
\emph on 
inheritance
\emph default 
.
 Each profile relates to some real existing object in Mahogany, for example,
 a mailfolder "MyFolder" would have a FolderProfile with the same name as
 the folder associated with it, or the settings of the FolderView window
 would read their settings from a profile with the name "FolderView".
 So each object requests a profile of well-defined name relating to the
 object, to access its configuration information.
 So far this is not different from sections or groups in a config file.
\layout Subsection

Inheritance
\layout Standard

Whenever a profile is being created, it takes the pointer to a parent profile
 as argument in the constructor.
 This pointer may be NULL.
 A profile is therefore defined by two parameters: its name and its parent
 profile.
\layout Standard

The Motivation behind this is to have the behaviour of different parts of
 Mahogany change dynamically as they are being used, to make them context
 aware.
 For example, a ComposeView used to reply to a message from a mailing list
 might set a different return address to a ComposeView writing a message
 to a friend.
 Depending on from where the ComposeView was created, it will have different
 parent profiles (i.e.
 the profile of the folder with mailing list mails or the INBOX mailfolder
 profile or the mailfolder containing mails from my friends).
 Also, the MessageView window can inherit its settings from the folder that
 its messages are stored in (it inherits from the FolderView which inherits
 from the mailfolder) and therefore if a mailfolder is likely to contain
 lots of long mails (e.g.
 the Mahogany developers ranting about the advantages and shortcomings of
 different features), it can have a smaller typeface configured for displaying
 the messages -- configured at the mailfolder level, not for a particular
 MessageView.
\layout Subsection

Which Profiles are there?
\layout Standard

A list of all profiles can be obtained with 
\family typewriter 
static kbStringList *ProfileBase::ListProfiles(int type = PT_Any)
\family default 
, which will return a list of either all profiles or those having the specified
 type if it is not 
\family typewriter 
PT_Any
\family default 
.
 
\layout Subsection

Technical description
\layout Subsubsection

Initialisation
\layout Standard

When a profile is created, it will check whether a profile file with its
 name exists.
 For example MyFolder.profile or ComposeView.profile.
 If so, the profile will create a wxFileConfig object representing this
 file, otherwise this pointer remains NULL.
\layout Subsubsection

Reading values
\layout Standard

When values are read, the profile will first check its own configuration,
 then try to inherit the value if it doesn't find it.
 It goes through the following steps, returning a value as soon as one is
 found:
\layout Enumerate

If its own wxFileConfig *m_config is not NULL, it will try to read the value
 from there (i.e.
 from the profile file).
\layout Enumerate

It will look up its 
\shape italic 
exact location
\shape default 
 in the global configuration object.
 The 
\emph on 
exact location
\emph default 
 is found by asking its parent profile for its path and appending its own
 name to it.
 I.e.
 the ComposeView profile called from the main window would return an 
\emph on 
exact location
\emph default 
 "M/Profiles/ComposeView".
 If a ComposeView window was opened from a FolderViewFrame showing a mailfolder
 "MyFolder", the path might look like this: "M/Folders/MyFolder/ComposeView",
 as the profile was created with the mailfolder profile as parent.
 So it would try to read the value from this section if it exists.
\layout Enumerate

If still not found, it will go up the path in the configuration and try
 to find the value there, i.e.
 it would try "M/Folders/MyFolder", "M/Folders" and "M".
\layout Enumerate

If not found, it will forward the request to its parent profile.
\layout Enumerate

If not found, it will look in the global profile (==global configuration
 in [M/Profiles] section).
\layout Enumerate

otherwise return the default value
\layout Subsubsection

Writing values
\layout Standard

If the profile has its own wxFileConfig object representing a configuration
 file, then values will be stored there, otherwise in the 
\emph on 
exact location
\emph default 
 in the global configuration.
\layout Standard

Under no circumstances will any values be modified in the parent profiles.
\layout Subsection

Shortcomings and things to fix
\layout Itemize

Names of profile files should be case insensitive.
\layout Itemize

Check and verify all locations of profile creation for sensible use of parent
 profiles (i.e.
 inherit from mailfolder profile but not from folderviewprofile).
\layout Itemize

remove redundancy in lookup routines, i.e.
 going up in path is identical to inheriting.
\layout Itemize

What is desperately needed is some more GUI support for this.I envision a
 profile editor showing a list or treectrl of profiles from which to pick,
 combined with a notebook of all available profile settings, whether they
 belong to the object in question or not.
 Also it would be nice if all preferences pages had a little boolean checkbox
 to activate or deactivate them, so one can explicitly say "don't set this
 value, inherit it" so the value would be removed from the profile in question.
\layout Itemize

Profile interface needs a function to remove a value.
\layout Itemize

I have to add a function to retrieve a list of all Profiles and of all Profiles
 of a given type (e.g.
 folder profiles).
\layout Itemize

All access to wxConfig pointers in profiles and groups etc should be removed.
 Exception: the global appplication config profile which needs to make its
 wxConfig pointer available for use by the wxPersistentControl classes.(though
 these would be much more useful if they took profile pointers instead,
 but I don't insist for now for the sake of reusability of them).
\layout Section

Filtering
\layout Standard

The following proposal is currently being implemented in source.
\layout Standard

Filtering rules in Mahogany are described in a simple control language,
 interpreted by a recursive descent parser.
 No yacc or flex required.
 I try to explain this in some form of BNF notation:
\layout Verse

RULE:
\layout Verse

CONDITION EXPRESSION EXPRESSION
\begin_deeper 
\layout Verse

// if true // if false
\end_deeper 
\layout Verse

CONDITION:
\begin_deeper 
\layout Verse

( CONDITION LOGICAL_OPERATOR CONDITION )
\layout Verse

SIMPLE_CONDITION
\end_deeper 
\layout Verse

EXPRESSION:
\begin_deeper 
\layout Verse

ACTION_COMMAND
\layout Verse

RULE
\end_deeper 
\layout Verse

SIMPLE_CONDITION:
\begin_deeper 
\layout Verse

match_exact(arg, flags)
\layout Verse

match_substring(arg, flags)
\layout Verse

match_regexp(arg, flags)
\layout Verse

python_rule(pythonfunc, args)
\layout Verse

...
\end_deeper 
\layout Verse

ACTION_COMMAND:
\begin_deeper 
\layout Verse

move_to_folder()
\layout Verse

delete()
\layout Verse

adjust_score() // I'd like scoring of messages like in GNUS, useful for
 news
\layout Verse

print()
\layout Verse

forward_to()
\layout Verse

send_reply()
\layout Verse

python_acton(pythonfunc, argc)
\layout Verse

...
\end_deeper 
\layout Standard

I believe this would be:
\layout Itemize

easy to parse by the program
\layout Itemize

easy to understand and edit by humans as it is stored in a programming-language
 like style
\layout Itemize

easily extensible
\layout Itemize

powerful enough to build rather complex expressions and rules 
\layout Standard

A Filter object would be an abstract representation of a set of rules parsed
 from a string (can contain more than one rule).
 It might be used by applying it to a given Message object.
 A subset of the Filter functionality could be a MatchTest object, which
 only knows conditions but no rules.
 It would return true if its conditions all return true (includin possible
 logical operators of course), false otherwise.
 It is used by the Filter class and could be used by some other Mahogany
 functionality like e.g.
 a "vacation" function which needs to check for mail-loops.
 Though, all this can actually be achieved with Filters, there shouldn't
 really be a need for a MatchTest class.
 
\layout Section

Addressbook (ADB) classes
\layout Standard

Tech documentation of address book related classes.
\layout Subsection

Introduction
\layout Subsubsection

terms
\layout Standard

"Address book" will be abbreviated as "ADB" from now on.
\layout Standard

The ADB classes stor and allow to retrieve/edit e-mail addresses indexed
 by aliases/nicknames and other related information.
 It's important that ADB records are hierarchally organized, i.e.
 there may be not only entries but also groups containing other entries
 and groups.
 There may be several address books, possibly in different formats.
\layout Standard

FIXME: what happens if the same nick is found in several ADBs?
\layout Subsubsection

data stored
\layout Standard

each ADB entry must have at least the nickname and at least one e-mail
\layout Standard

address.
 The fields are now supported (* means required):
\layout Itemize

Nick Name (*)
\layout Itemize

Full Name
\layout Itemize

First Name
\layout Itemize

Family Name
\layout Itemize

Prefix (M/Mme/...)
\layout Itemize

Title
\layout Itemize

Organisation
\layout Itemize

Birthday
\layout Itemize

Comments (any text, multi-line)
\layout Itemize

EMail (*)
\layout Itemize

HomePage
\layout Itemize

ICQ
\layout Itemize

Prefers HTML (boolean, if not - send text only)
\layout Itemize

Other EMails (list of additional e-mail addresses)
\layout Itemize

Home and office address
\layout Subsubsection

current ADB files format (Mahogany version 0.xx)
\layout Standard

TODO
\layout Itemize

Native Format using wxFileConfig
\layout Itemize

BBDB Version 2, support for Emacs style .bbdb files
\layout Subsection

Classes
\layout Standard

Class hierarchy is pictured below.
 Double arrows indicate inheritance, simple ones - functions which allow
 to get an object of this type.
 Dashed lines indicate "inner working" of the classes, i.e.
 something that you can safely ignore if you only want to use (and not modify)
 ADB code.
 All of these classes are the interfaces - i.e.
 they have no data and all their methods are public pure virtual (except
 for AdbManager, but it's almost like this...).
 All of the classes are reference counted (they derive from MObjectRC) and
 thus the usual rules of workign with ref counted objects apply (see MObject.h
 for details).
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 static AdbManager::Get()
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 -
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 AdbManager - - - - - - - -
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 | AdbDataProvider
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 GetEntry()
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 | CreateBook()
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 ----------
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 | <- - - - - - - - - -
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 |
\layout Standard


\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 
 
\backslash 
/
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 -
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard

AdbEntry =====> AdbEntryGroup ======> AdbBook
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 
 ^
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 ^
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 
 /|
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 /
\backslash 

\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\backslash 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 
 |
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 ------------
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 
 | Set/GetField()
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 GetGroup()
\layout Standard


\protected_separator 

\protected_separator 
 |
\layout Standard


\protected_separator 

\protected_separator 
 |
\layout Standard


\protected_separator 
 
\backslash 
 /
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard


\protected_separator 

\protected_separator 
 -
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Standard

entry info
\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 

\protected_separator 
 
\layout Subsubsection

Brief description of each class (see corresponding header for more detailed
 descriptions and method prototypes):
\layout Paragraph

AdbManager
\layout Standard

There is a single object of this class in the program.
\layout Standard

It's responsible for managing all address books used by the application.
 It is created (transparently) with a call to AdbManager::Get().
 It maintains a cache of all opened ADBs for efficiency and has methods
 to retrieve a pointer to AdbBook objects (which will be created using AdbDataPr
ovider if they don't exist yet).
 
\layout Paragraph

AdbDataProvider
\layout Standard

This is the class responsible for actually creating the address books objects.
 Each AdbDataProvider corresponds to one particular implementation of ADB,
 i.e.
 one provider is used for working with ADBs in Mahogany's native format,
 but another one may be used to work with ADBs in some other application's
 format or with remote (global wide) directory services accessible on the
 Internet.
 
\layout Standard

TODO expand! this is really crucial...
 
\layout Paragraph

AdbEntry 
\layout Standard

Is just a record in an ADB.
 Contains all information corresponding to the given nickname and the methods
 to access it.
\layout Paragraph

AdbEntryGroup
\layout Standard

Is a group of AdbEntries (no kidding) and has methods to retrieve/create/delete
 entries and subgroups.
 
\layout Paragraph

AdbBook
\layout Standard

Is just a root AdbEntryGroup which has some additional attributes such as
 description.
\layout Standard


\protected_separator 

\layout Subsubsection

Global functions
\layout Paragraph

AdbManager::Get() 
\layout Standard

returns the pointer to global (unique) AdbManager object, creating one if
 it doesn't exist.
 You must call Unget() exactly once for each call to Get().
\layout Paragraph

AdbManager::Unget() 
\layout Standard

decrements ref count of AdbManager, must be called for each (successful)
 call to Get().
\layout Paragraph

::AdbLookup(...) 
\layout Standard

looks in the specified address book(s) for the match for the given string.
 If the array of books is empty (or the pointer is NULL), all currently
 opened books are searched.
 All pointers returned in aEntries must be Unlock()ed by the caller (as
 usual).
\layout Subsubsection

Examples
\layout Standard

TODO (this is probably the section Karsten is waiting the most for...) (Yes
 indeed :-)
\layout Section

MModules
\layout Standard

MModules are DLLs which can be loaded into Mahogany at run time.
 This allows us to keep the main executable small and put all additional
 non-core functionality into add-on modules.
 The general structure of a module is very simple and can be understood
 by looking at Mdummy.cpp.
 It needs to contain a small number of functions with extern 
\begin_inset Quotes eld
\end_inset 

C
\begin_inset Quotes erd
\end_inset 

 linkage which are used to obtain information from the module and initialise
 it.
 Then, from the initialisation function, it can do anything it wants.
\layout Subsection

.MMD files
\layout Standard

Each module must be accompanied by a .mmd file with the same name as the
 module itself.
 This file contains a few lines explaining the module's purpose and is used
 to present a dialog for configuring the modules.
 The lines are:
\layout Itemize


\begin_inset Quotes eld
\end_inset 

Mahogany-Module-Definition
\begin_inset Quotes erd
\end_inset 

 <- a header ID to recognise valid files
\layout Itemize


\begin_inset Quotes eld
\end_inset 

Name: Mdummy
\begin_inset Quotes erd
\end_inset 

 <- the symbolic name
\layout Itemize


\begin_inset Quotes eld
\end_inset 

Version: 0.123
\begin_inset Quotes erd
\end_inset 

 <- the version as a string
\layout Itemize


\begin_inset Quotes eld
\end_inset 

Author: John Doe <john@somewhere.org>
\begin_inset Quotes erd
\end_inset 

 <- the author
\layout Itemize


\begin_inset Quotes eld
\end_inset 


\begin_inset Quotes erd
\end_inset 

 <- an empty line
\layout Itemize


\begin_inset Quotes eld
\end_inset 

multiple lines of text describing the module's functionality
\begin_inset Quotes erd
\end_inset 


\layout Section

Multi-Threading, ASMailFolder and Locking
\the_end
