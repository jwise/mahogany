#This file was created by <karsten> Sun Nov 22 18:30:05 1998
#LyX 1.0 (C) 1995-1998 Matthias Ettrich and the LyX Team
\lyxformat 2.15
\textclass article
\language default
\inputencoding default
\fontscheme default
\graphics default
\paperfontsize default
\spacing single 
\papersize a4paper
\paperpackage a4
\use_geometry 0
\use_amsmath 0
\paperorientation portrait
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\defskip medskip
\quotes_language english
\quotes_times 2
\papercolumns 1
\papersides 1
\paperpagestyle default

\layout Title

Compiling M on DEC Alpha with Digital UNIX 3.2c
\layout Author

Holger Bauer
\latex latex 

\backslash 

\backslash 

\latex default 
 
\size small 
(
\family typewriter 
bauer@itsm.uni-stuttgart.de, http://www.itsm.uni-stuttgart.de/~bauer
\family default 
)
\layout Enumerate

First I took the following arguments for configure:
\newline 

\family typewriter 
\size small 
configure --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/shlib
 --with-wxGTK --without-python
\newline 

\family default 
This would not work since
\family typewriter 
 make dep 
\family default 
still tries to find 
\family typewriter 
Python.h
\family default 
.
\newline 
Therefore I created a dummy include file Python.h in 
\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/src/Python
\family default 
.
 This helped to complete make dep.
 
\begin_inset LatexCommand \label{item1}

\end_inset 


\layout Enumerate

However step 
\begin_inset LatexCommand \ref{item1}

\end_inset 

 still reported some warnings:
\newline 

\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/extra/src/c-client/mail.h 
\family default 
would complain about a missing 
\family typewriter 
linkage.h
\family default 
 header file.
 Also, a missing 
\family typewriter 
osdep.h
\family default 
 file was reported.
\newline 

\family typewriter 
\latex latex 

\backslash 
dots
\latex default 
/M/extra/src/c-client/osdep.h 
\family default 
falsely pointed to 
\family typewriter 
os_gof.h 
\family default 
but this file was missing.
 Therefore copied
\family typewriter 
 os_osf.h 
\family default 
to
\family typewriter 
 os_gof.h
\family default 
.
 Also, copied
\family typewriter 
 os_osf.c 
\family default 
to
\family typewriter 
 os_gof.c 
\family default 
since 
\family typewriter 
osdepbas.c 
\family default 
pointed to
\family typewriter 
 os_gof.c
\family default 
.
 
\layout Enumerate


\family typewriter 
cd src;
\newline 
make;
\family default 

\newline 
This would fail since swig was not searched for by the configure script.
 Since even I gave --without-python to configure make would search in /src/Pytho
n and try to compile things there I decided to install python and swig.
\layout Enumerate

The Python-FAQ states that python definitely has to be compiled with the
 DEC cc.
\layout Enumerate

After that I took:
\newline 

\family typewriter 
\size small 
configure --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/shlib
 --with-wxGTK
\newline 

\family default 
The make process would then stop in 
\family typewriter 
\size default 
\latex latex 

\backslash 
dots
\latex default 
/M/src/adb/AdbFrame.cpp
\family default 
.
 The line 
\latex latex 

\newline 

\family typewriter 
\latex default 
AdbTreeElement *current = wxIsPathSeparator(strEntry[0u])
\latex latex 

\backslash 
dots
\newline 

\family default 
\latex default 
would not compile since the wxString function takes a long integer (due
 to the 64 bit architecture).
\newline 
This error might disappear if somebody adjusts the wxString library accordingly.
\newline 
In meantime (for my local 
\family typewriter 
libwx_gtk.so
\family default 
) I changed to 
\family typewriter 
strEntry[0]
\family default 
.
\layout Enumerate

Then only final linkage errors occured:
\newline 

\family typewriter 
-lpthread
\family default 
 is not known, needs 
\family typewriter 
-lpthreads
\family default 

\newline 

\family typewriter 
-lcrypt
\family default 
 is not known, just omit
\newline 

\family typewriter 
-ldmalloc
\family default 
 is not known, pass
\family typewriter 
 --without-dmalloc
\family default 
 to
\family typewriter 
 configure
\family default 
.
\layout Enumerate

Because the link process did not give me any error I expected M to run (at
 least some kind of unstable).
 But a core dump appeared immediately.
\newline 

\family typewriter 
dbx
\family default 
 gives to following information:
\newline 

\family typewriter 
(dbx) run 
\newline 
signal Segmentation fault at >*[mig_get_reply_port, 0x3ff83004a0c] stq r26,
 0(sp) 
\newline 
(dbx) where 
\newline 
> 0 mig_get_reply_port(0xffffffffffffffff, 0xffffffffffffffff, 0xfffffffffffffff
f, 0xffffffffffffffff, 0xffffffffffffffff) [0x3ff83004a0c] 
\newline 

\family default 
The output of 
\family typewriter 
gdb
\family default 
 is not very appealing:
\newline 

\family typewriter 
(gdb) run Starting program: /usr3/bauer/src/M/M/src/M 
\newline 
Program received signal SIGSEGV, 
\newline 
Segmentation fault.
 0x3ff83008f5c in port_allocate ()
\newline 
(gdb) where
\newline 
#0 0x3ff83008f5c in port_allocate () #1 0x3ff83004a38 in mig_get_reply_port
 () 
\newline 
#2 0x3ff83008f94 in port_allocate () #3 0x3ff83004a38 in mig_get_reply_port
 ()
\newline 

\family default 
This output runs until infinity 
\latex latex 

\backslash 
dots
\latex default 
.
\the_end
