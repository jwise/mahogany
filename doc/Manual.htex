%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Project:     M
% File name:   Manual.htex
% Purpose:     Mahogany manual with context sensitive help ids
% Author:      Karsten Ballüder
% Modified by: Vadim Zeitlin: 11.04.03: now it is pure LaTeX, not LyX any more
% Created:     1997
% CVS-ID:      $Id$
% Copyright:   (c) 1997-2003 M Dev Team
% Licence:     M license
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,oneside,english]{book}
\usepackage{palatino}
\usepackage[T1]{fontenc}
\usepackage{babel}

\newcommand{\mailtolink}[1]{\htmladdnormallink{<#1>}{mailto:#1}}
\makeatletter

\newcommand{\noun}[1]{\textsc{#1}}

\usepackage{html, epsfig}
\makeatletter

\makeatother
\begin{document}

\vfill{}
\title{{\LARGE \textsl{Mahogany User Manual}}\\
{\Large Version 0.65 ``Claire''}}
\vfill{}


\author{Copyright 1997-2003 by The Mahogany Development Team\\
\vspace{1cm}
\mailtolink{mahogany-developers@lists.sourceforge.net} \\
\vspace{1cm}
Written by Vadim Zeitlin, Karsten Ballüder et.al.}

\maketitle

\tableofcontents{}


\chapter{Using Mahogany }

\bigskip{}
{\centering \textbf{\large Please note that the manual is significantly
out of date}\large \par}

{\centering \textbf{\large and may contain information which is not
correct any more.}\large \par}

{\par}

{\centering \textbf{\large Any help with keeping it up to date would
be very appreciated!}\large \par}
\bigskip{}


\section{Release Notes\_1001\_}

Welcome to the new Mahogany release! If you haven't installed the
program yet, you probably want to start by doing it. Please check
if we don't have prebuilt binaries for your platform (currently we
only provide binaries for Linux and Win32). If not, you'll have to
build it from the sources: please refer to the README file for the
compilation instructions. Mahogany should generally work on any modern
Unix flavour but, of course, you can always contact us if you have
any problems with building it.


\subsection{Changes against the previous versions}


\subsubsection{0.65 against 0.64}

First of all, too many bugs to be mentioned here were fixed. During more than a
year since the last release we mainly concentrated on making Mahogany more
stable and faster (or at least less slow) rather than on adding new features.

Yet, inevitably, some of them still crept in and here is an incomplete list:
\begin{itemize}
\item It is now possible to postpone messages being composed and later resume
      writing them by opening them in ``Drafts'' folder
\item Mahogany tries to save messages being composed in case of crash or
      interrupt
\item TLS (as in \noun{STARTTLS}) is now supported for all protocols (SMTP,
      IMAP and POP)
\item Preliminary and limited support for PGP added: GNU Privacy Guard
      may be used for decoding the PGP-encoded message and checking PGP
      signatures.
\item Message viewer now recognizes {\tt *bold*} and {\tt \_italic\_} markup,
      can decode messages encoded in ROT13 and highlights signatures in a
      different colour. More URLs are found and highlighted and detecting them
      is much faster now.
\item SMTP authentication now can be tweaked to work even with seriously
      broken servers such as qmail and exim 3
\item Mahogany now comes with many built-in spam tests which can be tweaked
      to be more or less strict. It isn't comparable to Spam Assasin yet, but
      it is better than nothing.
\item Composer interface has been changed, hopefully for the better, once again
\item It is now possible to control a remote instance of Mahogany using the
      command line arguments (see \ref{cmdlineargs}) and also to directly open
      the composer from the command line.
\item ``Bounce'' (also known as ``Redirect'') command was added as well as
      ``Resend message'' one.
\item Search results are now shown in a so called virtual folder which makes
      working with them much more convenient and it is now also possible to
      search in many folders at once.
\item More new commands in no special order: ``Move folder'', ``Follow up to
      newsgroup'', ``Go to message'' (by number), ``Preview'' in composer
\item Message viewer supports UTF-7 and UTF-8.
\item Raw text view dialog now has a find button.
\item It is now possible to use config files instead of the registry under
      Windows too.
\end{itemize}

Finally not really a new feature but an important achievement in our struggle
for world domination: Mahogany now runs under Mac OS X as well! Note that
Mahogany is a real native (Carbon) application and doesn't require GTK+ or X11.

\subsubsection{0.64 against 0.63}

This time the most important changes have happened to the already
existing features many of which were dramatically improved. Support
for both IMAP4 and POP3 has got better, many UI improvements were done
and too many bugs to mention here were fixed.

The main change without doubt is the complete reorganisation of the
program internals which now allows us to only download the headers
shown on the screen from server instead of getting all of them. This
means that the time needed to open a folder is now almost independent
of the folder size and Mahogany can be used without troubles with
folders containing $50000$ messages (and maybe more - but this wasn't
tested yet).

But what would be a new release without some new features? So here
they are:

\begin{itemize}
\item Added optional support for viewing and printing the HTML messages.
Also added an optional text-only viewer and a viewer bar to quickly
change the current viewer.
\item Added possibility to monitor a folder (or server) in the background
just updading the number of messages in it but without actually downloading
them.
\item IMAP server-side sorting and threading can now be used if available.
It is also possible to sort and thread messages simultaneously. Both
are now also done much more efficiently and more correctly.
\item Mahogany now remembers the flags for the POP3 servers and new mail
detection for them works much more reliably which now makes Mahogany
a much better POP3 client (provided your server supports UIDL POP
command). POP3 code also tries to be faster by optionally using TOP
instead of downloading the entire messages.
\item Support for List-Post header and the possibility to configure the
program to automatically reply to the mailing list only.
\item Added rename and copy buttons to the filter editing dialog.
\item Added \char`\"{}Open as readonly\char`\"{} command -- this can be significantly
faster than \char`\"{}Open\char`\"{} for the local folders and also
works for the read only files.
\item Added a command to permanently delete messages instead of moving them
to the Trash folder -- useful for dealing with spam.
\item Filters were sped up even more. They also show a nicer progress dialog
now.
\item Added commands to manually update the status of one or all folders.
\item Also added commands to mark messages as read or unread.
\end{itemize}
Some of the notable UI improvements are:

\begin{itemize}
\item Quoting the original text when replying is now optional, you can also
choose to include only the text selected in the viewer in the reply.
\item Progress dialogs are shown while Mahogany is performing some long
operations. The existing progress dialogs shown while retrieving the
message headers now show the details of the messages being retrieved.
\item Password handling in case they are not stored in the config file has
been improved - Mahogany can now remember them for this session only
instead of keeping prompting for them.
\item Clicking on the header in the folder view window gives fast access
to the sorting/threading menu with many useful items.
\item Scrolling beyond the end of the current messages (optionally) selects
the next unread message or folder.
\item It is possible to rename the folder in the tree and the underlying
folder file or mailbox independently of each other.
\end{itemize}
The Win32 version has now some more of the possibilities of the Unix
one:

\begin{itemize}
\item SSL support is now available under Windows.
\item Mahogany can play a sound on receiving a new mail (optionally, of
course).
\end{itemize}

\subsubsection{0.63 against 0.62}

Again, most of the effort went into optimizing the program for speed.
Filtering and moving mail messages on IMAP servers is now an order
of magnitude faster and startup time has been reduced too (especially
under Windows). Several fatal bugs which had unfortunately crept into
Win32 release were fixed as well.

The new features this time include

\begin{itemize}
\item Showing the total number and the number of unread messages directly
in the folder tree
\item New so-called unattended, or away, mode in which all new mail notifications
and any interactive dialogs are temporarily suppressed
\item A few new commands such as \char`\"{}Clear folder\char`\"{} to delete
all messages in a folder without even opening it (handy for emptying
the trash folder) and \char`\"{}Close\char`\"{} and \char`\"{}Close
all\char`\"{} folder(s).
\end{itemize}
There are several more minor improvements as well:

\begin{itemize}
\item New URL popup menu in the message viewer and \char`\"{}Open URL in
new browser window\char`\"{} option
\item {}``Open with...{}'' command in attachment context menu
\item A new option to automatically select the units for message size (KB/MB)
\item Python 2.x is now supported and not only 1.5 (Unix)
\end{itemize}
Some of non fatal but annoying bugs fixed in this release are:

\begin{itemize}
\item Fixed server side searching (IMAP only)
\item Fixed text highlighting when selecting text in the viewer
\item Renaming of the folders in the tree fixed once again
\end{itemize}

\subsubsection{0.62 against 0.61}

The main changes in this release concern the Mahogany internals: the
stability and efficiency have been both greatly improved, in particular
it is believed that all fatal crashes using IMAP servers are now gone.
Deleting, expunging and changing the status of the messages is now
much faster, especially for the folders with a lot of messages. Of
course, there are also several new features:

\begin{itemize}
\item Order of the folders in the folder tree is customizable, the system
folders appear at the top (and not scattered through the tree in alphabetical
order)
\item Support for flagging the messages was added, the folders containing
flagged messages are shown in a different colour in the folder tree
\item All folders opened the last time can be remembered and reopened during
the next run
\item \texttt{TEXT/PLAIN} attachments can now be optionally shown inline
\item hard limit on number of retrieved messages was added (see \ref{limitdatatransfer})
\end{itemize}
Many bugs have been fixed:

\begin{itemize}
\item sending mail with local MTA (sendmail) respects BCC settings
\item temporary files with mail messages are not created world readable
any more
\item language autodetection fixed
\item messages with embedded MIME attachments are shown correctly
\item server side searching on IMAP servers works
\item renaming folders was fixed
\item crashes when: viewing messages with incorrect date, deleting some
folders and some others were fixed
\end{itemize}
And a few improvements too:

\begin{itemize}
\item better UI for the filters dialogs
\item messages can now also be sorted by status and by size
\item a hard limit on number of the messages retrieved can be set
\end{itemize}

\subsubsection{0.61 against 0.60 }

Note: the version 0.61 wasn't officially released

A couple of new features, most importantly:

\begin{itemize}
\item Possibility to save (to the address book) all addresses from a message
appearinganywhere in the headers.
\item It is now possible to import all folder files in MBOX (Unix) format
using \noun{{}''Folder|Import folder tree...{}''} command (see
\ref{Import})
\end{itemize}

\subsubsection{0.60 against 0.50}

Most importantly, all known major bugs in 0.5 have been fixed in this
release. We still have some minor buglets and lots of wishes and enhancements
on our list, but all serious bugs should be gone now. A couple of
new features have been added:

\begin{itemize}
\item fixes to all serious bugs from version 0.50
\item significantly improved IMAP support: it is now possible to subscribe
to all folders on an IMAP server with a single click or to manually
select them from a dialog; Mahogany also uses server side message
functions when possible resulting in huge performance improvement
\item new, improved filtering system (warning: old filters won't work any
more, contact us if this is really a serious problem for you)
\item charset and encoding support for message contents and headers (including
autodetecting the charset of incoming messages and setting it for
the outgoing ones)
\item mail can be sent using local MTA (sendmail) in addition to SMTP
\item import of settings and folder collections from Pine and XFMail, vCard
support (import/export from addess book, attach to messages)
\item drag and drop for message copying and moving - \char`\"{}Quick Move\char`\"{}
and \char`\"{}Quick Filter\char`\"{} functions
\item folders now can (finally) be renamed
\item quoted text highlighting in the message viewer!
\item sort the messages display by simply clicking on the corresponding
column, the sorting dialog also has been improved
\item folders with new/recent messages are highlighted in the folder tree
\item it is possible (although still discouraged) to run Mahogany as root
\item passwords in the config file are encrypted using TwoFish algorithm
\item option to always use external editor by default
\item messages from oneself are optionally marked as such
\item support for password protected SMTP and NNTP servers
\item more verbose error reporting and detection
\item OpenSSL loaded dynamically if available
\item PalmOS module supports AvantGo/MAL synchronisation
\item templates now may be used for replying/forwarding as well
\item many other various fixes
\end{itemize}
\textbf{New experimental features include:}

\begin{itemize}
\item supporting multiple-identities and easy switching between them
\item support of storing configuration settings on an IMAP server allowing
to share them between different machines/accounts
\end{itemize}
\textbf{Known bugs:}

\begin{itemize}
\item There are always some, listed on our bugtracker at http://mahogany.sourceforge.net/bugz/
and we are working on them.
\item Version 0.60 suffers from a minor printing bug leading to some overlap
between strings sometimes, which is due to a bug in wxWindows which
will hopefully be fixed fairly soon.
\end{itemize}

\subsubsection{0.5 against 0.23a}

This release has long been delayed, mainly due to us waiting for changes
in wxWindows to be completed. As we introduced new features in the
meantime, those introduced new delays, and so on. It has been more
than half a year since the last release, so changes are major. We
hope to stick to a much faster cycle of minor update releases for
the future. The main new features are:

\begin{itemize}
\item Proper support for MH folders.
\item Browsing and subscription management for IMAP and NNTP servers.
\item A plugin module system has been created which allows to dynamically
load expansion modules. Existing modules (statically linked in this
release, but dynamically linkable) include a filtering language and
PalmOS support. For the future, a calendar/timeplanner plugin is planned.
\item Configurable filtering rules have been added.
\item Message threading and configurable sort order is supported.
\item An HTML-based help browser has been added.
\item Configurable date format.
\item Handling of dial-up networking and detection of connection status.
\item Optional user of a Trash folder.
\item Wizard-dialogs and {}``tip of the day{}'' dialogs added to make
Mahogany easier to use.
\item Optional SSL support can be compiled in (not activated by default
due to US export restrictions), allowing secure access to mail and
news servers.
\item PalmOS handheld connectivity: synchronise e-mails with your PalmOS
handheld computer and use its addressbook within Mahogany. Also, backup,
restore and install databases of your handheld.
\item Bug fixes in nearly all parts of the code. Mahogany should suffer
much less from crashes than earlier versions. The message editor behaves
better and is faster.
\item Minor GUI improvements like keyboard bindings and nicer icons. Support
for KDE and GNOME filetype icons.
\end{itemize}

\subsubsection{0.23a against 0.22a}

The main news is, of course, the long-waited for availability of Win32
version. Also:

\begin{itemize}
\item Several bugs in message composer (including a few fatal ones) were
fixed. Only minor problems still persist.
\item Selections support (copy, cut, paste) in message composer and viewer.
\item The \texttt{{[}Apply{]}}and\texttt{{[}Cancel{]}}buttons in the options
and folder properties dialogs (mostly) work now.
\item Several minor bug fixes and improvements, including a massive speedup
in the update of folder listings over slow connections.
\item Printing no longer has overlap between pages.
\item Folders can be kept open all the time to speed up access to them,
very useful for {}``SentMail{}'' folder.
\item Better behaved, asks before removing all mail from spool.
\item Configurable templates for message composition and replies.
\item Message boxes now have icons in them.
\item Searching in mail folders.
\item And, of course, updated translations and documentation updates.
\end{itemize}
We have also made good progress on the filtering code, PGP/GPG support,
multi-threading support and support for loadable external modules,
but these features are not complete yet and disabled in the release.
Expect them to appear in the next releases.


\subsubsection{0.22a against 0.21a}

Release 0.22a is mainly a bugfix release against 0.21a.

\begin{itemize}
\item All know (crash-inducing) bugs fixed.
\item Message editor/viewer improvements, adding clipboard support and selections.
\item wxGTK layout bug fixes - German, French, Spanish translations
\item Text-search in messages
\item Several minor usability fixes, sub-folder support fixed.
\item Addressbook fixes
\item TCP timeouts configurable
\item Support for setting the Reply-To: header from To: field in message
replies.
\end{itemize}

\subsubsection{0.10a to 0.21a}

First, there are some user-visible changes against the latest version,
most notably the much improved message editor. This is still work
in progress and the next release should add the sorely missed cut
and paste support which only recently became functional in the underlying
wxGTK toolkit. Also, configurability has been much extended. For the
first time, Mahogany now defaults to collecting all mail from the
system's INBOX (whatever that is) to a central {}``New Mail{}''
folder. It can easily be set up to watch any number of different mail
accounts or newsgroups and collect mail from them.

This release got a bit delayed because we decided to finish some long
planned changes under the hood, mainly a complete rewrite of the internal
configuration system which now provides the inheriting configuration
settings we had planned, something that will become obvious in the
next release when full GUI support for it will be added. Also, we
seriously improved the mailfolder handling code to reliably handle
all kinds of error conditions, such as modified or disappearing mailboxes
or terminated connections and recover from them safely. Also, Mahogany
now has full working support for IMAP, NNTP and newsspools.

Apart from this there were many minor fixes and changes, both GUI
and mail code, documented in detail at the end of the TODO file.


\subsection{Known bugs}

\begin{itemize}
\item Newsspool support will not work with newsgroups not listed in the
{}``active{}'' file and is little configurable.
\item News is not always the easiest to use, but will be the next thing
to improve.
\end{itemize}

\subsection{TODO, features to implement}


\subsubsection{The next few things to be implemented:}

\begin{itemize}
\item Multi-threaded folder access, to avoid blocking while retrieving slow
remote folders/servers. This is moreless complete but not enabled
in the release as we want to test and debug it further before making
it the default behaviour.
\item Message editor: rich text editing \& HTML (Almost complete, but not
activated yet. Will be there very soon.)
\item A faster mail folder format or support for storing messages in an
ODBC database.
\item Support for PGP and GNU Privacy Guard to encrypt mails.
\item Wide character (Unicode) and UTF-8 support (waiting for GTK+ 2.0)
\end{itemize}

\subsection{Help Needed}

As you can see, we have big plans for Mahogany. To achieve all this,
we need some help. Areas where we would use some help are

\begin{itemize}
\item Updating this manual
\item Python
\item support for other mail protocols and mailfolder file formats, LDAP
\item If you have access to other systems apart from Linux/Solaris/FreeBSD/Windows,
you are very welcome to help us port Mahogany to those platforms,
or to other hardware than Intel.
\item Translations to other languages.
\item MacOS development
\item \textbf{Generally we welcome help for anything. If you miss a feature
in Mahogany, we are more than happy to help you implement it yourself.
Naturally we tend to work on the features that we either need ourselves
or find interesting to do. If your priorities are different, join
our team and help us improve it. Mahogany is and will always be an
OpenSource(TM) project and your involvement is wanted! If you have
any questions about this, please contact the developers at
\mailtolink{mahogany-users@lists.sourceforge.net}.
If you have questions about the Mahogany License, discuss them with
us -- we don't want the license to scare anyone.}
\end{itemize}

\subsection{Copyright\_1003\_}

Mahogany is copyright by The Mahogany Development Team (Founding members
Karsten Ballüder and Vadim Zeitlin). It is licensed under the Mahogany
{}``Artistic License{}'' as stated in section\ref{License} or,
alternatively, under GNU General Public License. Some part of the
source tree distributed with Mahogany is not covered under this license.
These additional sources can be found in the {}``\texttt{extra/src}{}''
subdirectory. Please check the files in the individual directories
for their copyright notices. However, they can be freely distributed
under certain conditions.


\subsubsection{Why not the GPL/BSD/QPL/my favourite license?}

Recently discussions about which license to chose for which project
provoked major flamewars in the Unix community. There is a trend to
put everything under the GPL or LGPL\footnote{%
which we recently felt victim of - due to some strong demand, we have
decided to allow alternatively licensing Mahogany under GPL
}. We do not want to get involved in this highly emotional and political
discussion. Our intent is to allow everyone to use and modify Mahogany
while preserving some form of control over its development. That is
why we chose a modified version of Perl's Artistic License. It is
both more and less restrictive than the GPL in certain ways. We do
not believe that there is one right license for everything. The Mahogany
Artistic License is much simpler and easier to understand than the
GPL, so we feel more comfortable with it. If you want to do something
with Mahogany and feel that the license poses a problem, \textbf{please}
contact us! We do not want the license to be a problem and any reasonable
request for deviating uses of Mahogany will be likely to be granted.
If in doubt, ask us and we will find a solution.


\subsection{The Mahogany ``Artistic License''\label{License}}


\subsubsection{Preamble}

The intent of this document is to state the conditions under which
this software package may be copied, such that the Copyright Holder
maintains some semblance of artistic control over the development
of the package, while giving the users of the package the right to
use and distribute the Package in a more-or-less customary fashion,
plus the right to make reasonable modifications.

This license is based on Perl's ``Artistic License'' and has been
adapted to better suit Mahogany. It aims to confirm with the Open-Source
specification. If you should have any questions about this license,
are unhappy with it or simply would like to comment on it, please
get in touch with us.


\subsubsection{Definitions}

``Package'' refers to the collection of files distributed by the Copyright
Holder, and derivatives of that collection of files created through
textual modification.

``Standard Version'' refers to such a Package if it has not been modified,
or has been modified in accordance with the wishes of the Copyright
Holder as specified below.

``Copyright Holder'' is whoever is named in the copyright or copyrights
for the package.

``You'' is you, if you're thinking about copying or distributing this
Package.

``Reasonable copying fee'' is whatever you can justify on the basis
of media cost, duplication charges, time of people involved, and so
on. (You will not be required to justify it to the Copyright Holder,
but only to the computing community at large as a market that must
bear the fee.)

``Freely Available'' means that no fee is charged for the item itself,
though there may be fees involved in handling the item. It also means
that recipients of the item may redistribute it under the same conditions
they received it.


\paragraph{Conditions of Use}

\begin{enumerate}
\item You may make and give away verbatim copies of the source form of the
Standard Version of this Package without restriction, provided that
you duplicate all of the original copyright notices and associated
disclaimers and only distribute the complete package as a whole.
\item You may apply bug fixes, portability fixes and other modifications
derived from the Public Domain or from the Copyright Holder. A Package
modified in such a way shall still be considered the Standard Version.
\item You may otherwise modify your copy of this Package in any way, provided
that you insert a prominent notice in each changed file stating how
and when you changed that file, and provided that you do at least
ONE of the following:

\begin{enumerate}
\item place your modifications in the Public Domain or otherwise make them
Freely Available, such as by posting said modifications to Usenet
or an equivalent medium, or placing the modifications on a major archive
site such as sunsite.unc.edu, or by allowing the Copyright Holder
to include your modifications in the Standard Version of the Package,
and rename any non-standard executables so the names do not conflict
with standard executables, which must also be provided, and provide
a separate manual page for each non-standard executable that clearly
documents how it differs from the Standard Version. You must not make
the modified version depend on any other software or library if that
software or library is not Freely Available or if it is covered under
a license more restrictive than this.
\item use the modified Package only within your corporation or organisation.
\item make other distribution arrangements with the Copyright Holder.
\end{enumerate}
\item You may distribute the programs of this Package in object code or
executable form, provided that you do at least ONE of the following:

\begin{enumerate}
\item distribute a Standard Version of the executables and library files,
together with instructions (in the manual page or equivalent) on where
to get the Standard Version.
\item accompany the distribution with the machine-readable source of the
Package with your modifications, including the complete machine-readable
source of the unmodified Standard Version. You must not make the modified
version depend on any other software or library if that software or
library is not Freely Available or if it is covered under a license
more restrictive than this.
\item give non-standard executables non-standard names, and clearly document
the differences in manual pages (or equivalent), together with instructions
on where to get the Standard Version. d.make other distribution arrangements
with the Copyright Holder.
\end{enumerate}
\item You may charge a reasonable copying fee for any distribution of this
Package. You may charge any fee you choose for support of this Package.
You may not charge a fee for this Package itself. However, you may
distribute this Package in aggregate with other (possibly commercial)
programs as part of a larger (possibly commercial) software distribution
provided that you do not advertise this Package as a product of your
own.
\item The name of the Copyright Holder may not be used to endorse or promote
products derived from this software without specific prior written
permission. However, all products derived from this software must
reproduce the original copyright notice as found in the Standard Version.
\item THIS PACKAGE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
\end{enumerate}

\subsection{The License Dialog\_4270\_}

When you start Mahogany for the first time, it will display the license
and conditions of use and ask you to accept or reject the license.
If you do not accept it, Mahogany will terminate. If you have any
questions about the license or want to otherwise comment on it, please
email the development team at \texttt{mahogany-users@lists.sourceforge.net}
.


\subsection{Additional Credits}


\paragraph{C-Client library: }

The use of the c-client library requires us to display the following
copyright notice:

\begin{quote}
Copyright 1999 by the University of Washington\\
Permission to use, copy, modify, and distribute this software and
its documentation for any purpose and without fee is hereby granted,
provided that the above copyright notice appears in all copies and
that both the above copyright notice and this permission notice appear
in supporting documentation, and that the name of the University of
Washington not be used in advertising or publicity pertaining to distribution
of the software without specific, written prior permission.~ This
software is made available \char`\"{}as is\char`\"{}, and THE UNIVERSITY
OF WASHINGTON DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, WITH REGARD
TO THIS SOFTWARE, INCLUDING WITHOUT LIMITATION ALL IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, AND IN NO
EVENT SHALL THE UNIVERSITY OF WASHINGTON BE LIABLE FOR ANY SPECIAL,
INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING
FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
TORT (INCLUDING NEGLIGENCE) OR STRICT LIABILITY, ARISING OUT OF OR
IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
\end{quote}

\subsubsection{The OpenSSL toolkit:}

Mahogany can be linked with the OpenSSL toolkit to support secure
communications over SSL. In that case, we must give due credit to
the authors and copyright of this library:

\begin{quote}
This product includes software developed by the OpenSSL Project for
use in the \htmladdnormallinkfoot{OpenSSL Toolkit}{http://www.openssl.org/}
.This product includes cryptographic software written by Eric Young
(eay@cryptsoft.com) This product includes software written by Tim
Hudson (tjh@cryptsoft.com)\char`\"{}
\end{quote}

\subsubsection{wxWindows:}

We gratefully acknowledge the use of the \htmladdnormallinkfoot{wxWindows}{http://www.wxwindows.org/}
cross-platform class library and the excellent work and support of
the wxWindows developer team.


\section{Introduction / Tutorial}

To get started on Mahogany, you should look at the following sections
of this manual:

\begin{itemize}
\item The Folder Tree (\ref{FolderTreeCtrl}) and how to create new folders
(\ref{CreateNewFolderDialog}).
\item The explanation of the INBOX (\ref{INBOX Folder}) and New Mail (\ref{New Mail Folder})
folders.
\end{itemize}
Obviously, the more of this manual you read, the better use you can
make of Mahogany. Once the manual has grown too large, we will provide
a short tutorial, but for now we go on coding instead.


\subsection{Getting started}

When you start Mahogany for the first time, it will first ask you
to accept the terms of its license. Note that you must accept it to
be able to use the program. After doing it, you will see the installation
wizard. It will guide you through several pages whose purpose is to
get the information absolutely required for running the program and
also prepare a useable initial setup for you. Please avoid abandoning
the wizard unless you really know what you are doing, so just click
next and ignore the checkbox on the first page for now.

It is quite likely that you already have some other email program
installed on your computer. Mahogany may import the configuration
settings for some of them (currently, Netscape Communicator, Pine
and XFMail but we have plans to add support for more programs in the
future) meaning that it will provide your existing settings as the
default values in the next pages. Of course, it is absolutely safe
to just skip this step and continue directly.

Next page asks you for your minimal personal information. You may
enter an empty personal name here if you wish (although it is better
to enter something) but it is required that you enter a valid email
address below. It will be used as your default return email address.
Note that you will be able to change this address in the future in
the program prefernces dialog as well as add other identities, possibly
with different email addresses, later.

The next page proposes you to setup some default servers. Windows
users \textbf{must} specify an SMTP server here. Under Unix you may
leave it empty if you want to use a local MTA such as \noun{sendmail},
\noun{qmail} or \noun{exim.} For the other servers you are free
to enter the server name or leave the entry empty if you don't want
to use it.

The following page is more interesting as it gives you the possibility
to configure some of the basic Mahogany options to your liking. Let's
consider them in order:

\begin{itemize}
\item Collect new mail (Unix only): typically, new mail arrives into the
system \noun{Inbox} folder on a Unix workstation. It is strongly
recommended that you don't leave it there but copy it immediately
instead into your own mail folder. Mahogany proposes to do this for
you by default, please let it do it unless you know better.
\item Use Trash mailbox: this should be self explanatory except that you
should note that this is just the global default setting and that
it can be changed later on folder per folder basis (i.e. you can have
some unimportant folders from which mail is deleted directly but just
move the more important messages from other folders. which you might
wish to undelete later, to the Trash).
\item Use Outbox: again, this should be clear but this is a global setting.
It can be changed later but it is probably worth setting it right
from the very beginning. If you have a permanent net connection you
probably don't need to use it.
\item Use dial-up network: Mahogany may bring up or down your Internet connection
for the dial up users. This is a half-experimental feature and, as
above, is not particularly useful if have a permanent net connection
\item Mailbox format (Unix only): this allows you to select the format for
the local system mailbox files Mahogany is going to create soon (you
will be able to choose the format for the folders you create yourself
when you do it, of course). The default is the MBX format which is
by far the most efficient but it is a binary format which is not understood
by as many programs as the traditional Berkeley MBOX format.
\end{itemize}
After finishing with the previous page you are almost done - the last
page of the wizard doesn't have any more options. It just proposes
you to send a test email to the address you had entered in the beginning
(remember that it must have been a valid one?). If you are absolutely
sure that you made no mistakes or if you can't or don't want to send
mail currently, please uncheck the checkbox at the bottom of the page.
Otherwise, let Mahogany do it as it might discover some problem with
your SMTP server. In any case, you should now see the main Mahogany
window which is described in the main section in front of you and
it means that Mahogany has been successfully installed. Congratulations!


\subsection{The main window}

The main window is broken in three parts. There is a tree of folders
(\ref{FolderTreeCtrl}) on the left and a view of the currently selected
folder (\ref{FolderView}) to the right of it which itself has two
parts: the upper one shows the list of all messages in the folder
while the lower one shows the currently previewed message.

The installation wizard has created a small number of standard folders
that Mahogany uses itself. Exactly which folders you now see on your
screen depends, of course, on the choices you have done in the wizard
but it should be a subset of the following list:

\begin{itemize}
\item {}``SentMail{}'': This folder is always created as Mahogany stores
copies of the messages you send in it. You may tell Mahogany not to
do it or save them in a different folder by modifying the options
near the top of the {}``Compose{}'' page in the preferences dialog.
\item {}``Trash{}'': If you have chosen to use it in the wizard, this
is the folder where the deleted messages will be moved to. The settings
for using it can be found in the {}``Folders{}'' page of the preferences
dialog.
\item {}``New Mail{}'': This is the central new mail folder. Under Unix
the messages arriving into the system \noun{Inbox} will be moved
here. Also, when you choose to collect mail from a remote POP3 or
IMAP4 server (see next subsection) it will be moved here as well.
\item {}``INBOX{}'' represents the {}``system inbox{}'' for your system.
You will only see it if you had chosen (in spite of multiple advices
against it) to not move new mail from it to the {}``New Mail{}''
folder. Exact location of this folder depends on your system setup
but some common locations are \texttt{/var/spool/mail} or \texttt{/var/mail.}
\item Server entries: you may also have entries for POP3, IMAP and NNTP
folders if you had specified them in the installation wizard. They
are described in details below.
\end{itemize}
The folder view on the right should show only one or two messages
right now (unless you already had some mail in your \noun{Inbox}).
The first of them should be self-explanatory and the second, if any,
is the test message Mahogany has sent to test your configuration.
If you didn't disable this test but don't see this message in the
folder, something may have gone wrong. Please look at the activity
log window which Mahogany has also created to see if there are any
errors in it. Also please see (\ref{Troubleshooting}) section.


\subsection{How to configure POP and IMAP folders?}

Although the installation wizard did create entries for POP and/or
IMAP servers in the folder, they are probably not very useful right
now. Or maybe you didn't create them then and want to do it now -
then just choose {}``Create{}'' item from the {}``Folder{}'' menu
and follow the instructions. If you are already fed up with the wizards
you may prefer to dismiss it on the first page by selecting the checkbox
there and enter all the folder parameters directly in the folder properties
dialog.

If you have let the wizard create the folder, you still need to use
the folder properties dialog to customize it. By the way, this dialog
can be accessed by selecting the corresponding item either from the
{}``Folder{}'' menu in the menu bar or from the popup menu you obtain
by right-clicking the folder in the tree.

Browse this dialog to get an idea of some of the options you may change.
Please note that most of the options in the first, {}``Access{}'',
page cannot be changed after the folder creation. The different options
are described in more details elsewhere in this manual.

Right now let us just give some examples of the typical configurations:

\begin{enumerate}
\item Typical POP3 server: normally, the new mail is downloaded from the
POP3 folders locally so go to the {}``New Mail{}'' page and select
{}``Collect new mail from this folder{}''. This will move all new
mail from the POP3 server to the {}``New Mail{}'' folder. If you
want to copy it instead just check the {}``Leave mail in this folder{}''
checkbox as well. Finally, if you want Mahogany to check the POP3
folder for the updates automatically please check the {}``Permanently
monitor this folder{}'' checkbox and change the polling interval
for it if needed.
\item IMAP server with only INBOX: if you only have INBOX folder on your
IMAP server you may configure it exactly as the POP3 server above.
You may also decide not to collect mail from it but read it directly
on the server - this is, in fact, the preferred mode of operation
as this works much better with IMAP than with POP.
\item IMAP server with multiple folders: in this case you almost surely
don't want to download all new mail from the IMAP INBOX to the local
folders but keep it on server. You will probably be interested in
using filters (\ref{Filters}) in this case.
\end{enumerate}

\subsection{How to set up your mail accounts}

{*}{*} This is currently missing, see the text in the FAQ. I will
explain here how to set up your accounts.


\section{Setting up Mahogany, its configuration files}

\subsection{Mahogany command line options}\label{cmdlineargs}

The following options are accepted. When both short and long options are listed
either one can be used and if the long options requires an argument, it must be
specified for the short one as well. The delimiter for the short options is
either {\tt /} or {\tt -} but only {\tt -{}-} can be used for the long ones.

\vspace{0.5cm}
{
   \centering \begin{tabular}{|c|c|}
   \hline
   Option & Meaning \\
   \hline
   \hline
   -h, -{}-help     &  show the summary of the command line options \\
   \hline
   -{}-verbose      &  generate verbose messages (off by default)   \\
   \hline
   -{}-debug        &  enable debug logging \\
   \hline
   -{}-safe         &  don't do anything automatically on startup \\
                  &  may be useful if Mahogany crashes when trying \\
                  &  to automatically do something after starting up \\
   \hline
   -{}-config=file  &  specify the alternate configuration file to use \\
                  &  may be also used to force using file instead of \\
                  &  the registry under Windows \\
   \hline
   -b, -{}-bcc=adr  &  specify a blind carbon-copy (BCC) recipient  \\
   \hline
   -c, -{}-cc=adr   &  specify a carbon-copy (CC) recipient  \\
   \hline
   -s, -{}-subject=str  &  specify the subject for the new message \\
   \hline
   -{}-body=str     &  the initial text of the message \\
   \hline
   -f, -{}-folder=str & the folder to open in the main frame on startup \\
   \hline
   -{}-lang=lng     & the language to use for the program messages, \\
                  & overrides the default language choice \\
   \hline
   -{}-newsgroup=group &  the news group to post the message to \\
   \hline
   \end{tabular}
}

\vspace{0.5cm}

The remaining command line arguments are taken as the recipients for the new
message.

If either of the {\tt -{}-bcc}, {\tt -{}-cc}, {\tt -{}-subject}, {\tt -{}-newsgroup} or
{\tt -{}-body} options is given or a command line argument follows the options,
the composer will be automatically opened on startup. If the ``Always run only
one instance'' option (see \ref{onlyoneinstance}) is set, the composer will be
opened in the already running instance of the program, if any.

Please do use {\tt -{}-debug} option if something goes wrongly, it can give
valuable information about the problem! See also the corresponding option
(\ref{debugoption}).

\label{configcmdlineopt}
If you want to use the configuration files under Windows (by default the
registry will be used to store the program options) you should use the
{\tt -{}-config=file} option each time when running the program. The easiest way
to do it is to create a shortcut to {\tt M.exe} and enter this argument there.

\subsection{User configuration files (Unix only)}

When run for the first time, \emph{Mahogany} creates a directory called
\texttt{.M} in the user's home directory. The file \texttt{\$HOME/.M/config}
will contain the current program configuration for this user. Only
values different from the default configuration are stored here. If
you want to obtain a list of all possible options (although arguably
if you are so curious, you'd better read \emph{Mahogany} sources directly),
you can manually add the entry

\begin{quote}
\texttt{RecordDefaults = 1}
\end{quote}
to the \texttt{{[}M/Profiles{]}} section of the configuration file.
This will cause all values which are used to be written to the configuration
file.

Note that an easy way to {}``reinstall{}'' Mahogany is to move \texttt{\$HOME/.M/config}
file to some other location or even delete it and restart Mahogany
-- then it will go through the installation process once again.


\subsubsection{System wide configuration file}

\emph{Mahogany} can be pre-configured on a system wide basis by supplying
a \texttt{M.conf} file in the installation directory (e.g. \texttt{/usr/share/Mahogany/M.conf}).
The syntax for this configuration file is identical to the user's
configuration file, so you can just copy a user's file to this location
and edit it by hand. Useful settings for a system wide default are
servers or mail return addresses. Entries prefixed with an exclamation
mark {}``!{}'' are marked as immutable and cannot be overwritten
by the user. This can be used by the system administrator to hard-wire
certain settings, like, for example the return mail addresses or mail
servers to use.


\subsection{Registry (Windows only)}\label{registrykey}

Under Windows the user settings are by default stored in the registry, under
{\tt HKCU$\backslash$Software$\backslash$Mahogany-Team$\backslash$M} key
where {\tt HKCU} stands for {\tt HKEY\_CURRENT\_USER}.

If you encounter a mention of some {\tt Entry} in the group {\tt {[}Group{]}}
of the config file, it maps to a value {\tt Entry} in the key
{\tt Profiles$\backslash$Group} under the root key specified above under
Windows.


\section{The User Interface}


\subsection{The Main Window\_2001\_}

\emph{Mahogany}'s main window is vertically divided into two parts.
On the left it has a tree view (\ref{FolderTreeCtrl}) of all available
mail or news folders. On the right of it, it shows the currently selected
folder in a folder view (see \ref{FolderView}).


\subsection{The Folder Tree\_2004\_}

\label{FolderTreeCtrl}The folder tree shows a hierarchical view of
all folders managed by \emph{Mahogany}, this includes both mail folders
and newsgroups. Folders can be grouped hierarchically and inherit
settings from their parent folders (e.g. the server host). Clicking
the right mouse button on any tree node will pop up a menu with some
options. To open a folder or connection to a server for the first
time, choose {}``Create New Folder{}'' which will show you a dialog
(\ref{CreateNewFolderDialog}).


\subsection{Create New Folder Dialog}

\label{CreateNewFolderDialog}This menu entry allows you to open a
connection to a server or view a mailfolder. No matter whether it
is a POP, IMAP, NNTP connection , a file based mailfolder, a newsgroup
or whatever, Mahogany treats them all the same and calls them all
{}``folder{}''. The dialog has several pages which include at least:
\textbf{Access} (\ref{FolderAccessPage}), \textbf{New Mail} ()\textbf{,
Compose} (\ref{ComposePage}) and \textbf{MessageViewer} (\ref{MessageViewerPage}).


\subsubsection{Access\_2005\_}

\begin{itemize}
\item \textbf{\label{FolderAccessPage}Folder Type}\\
Here you can choose from the currently supported folder types. The
{}``News{}'' type is for reading a local newsspool, it is only partially
supported at present but should work fine in most circumstances. {}``NNTP{}''
is for reading news from a remote newsserver. {}``IMAP{}'' and {}``POP3{}''
are for accessing remote mail server. If possible, prefer IMAP over
POP, it is much more powerful and significantly faster, saving modem
time.
\item \textbf{User name}\\
For those folder types where it is required, the user name or login
to get access to them.
\item \textbf{Password}\\
For those folder types where it is required, you can specify the password
here. If you leave it empty, Mahogany will prompt you for the password
whenever it is needed. If you want to auto-collect mail from this
folder or even just check it in the background, you should specify
it, otherwise you will be asked for it at least once per session (you
will be able to tell Mahogany if it should keep it for the session
duration or not). \textbf{Note that storing passwords is a potential
security risk!} The password typed in here will get stored in your
\texttt{\$HOME/.M/config} configuration file on Unix or in the registry
on Windows. While this file will be created as only readable by you
and the passwords be encrypted (using very weak encryption), it is
nevertheless a certain risk. If you accidentally change the permissions
of that file, someone else could obtain your passwords, though Mahogany
would detect this the next time it starts and warn you about it.
\item \textbf{Server}\\
For the folders which require a server setting, you can specify the
server host here. If unspecified they will inherit the setting from
the global preferences. You may use a colon (:) after the server name
to specify a non default port.
\item \textbf{Newsgroup}\\
For NNTP and Newsspool folders, the name of the newsgroup, e.g. comp.os.linux.announce
.
\item \textbf{Comment}\\
Whatever you like to add, this is ignored by Mahogany.
\item \textbf{File name}\\
For folders of type {}``File{}'', the filename or directory where
the folder is.
\item \textbf{Collect all mail from this folder}\\
Makes this folder {}``incoming{}''. Mahogany will regularly check
the folder for new mail and move any messages to the global folder
for new mail, usually the {}``New Mail{}'' folder.
\item \textbf{Keep server connection when idle}\\
If selected, Mahogany will keep the folder open during the entire
program session after it had been opened for the first time. This
can significantly speed up access to large folders as opening them
can take some time. A very useful option for frequently used folders
and Mahogany uses it by default for the {}``SentMail{}'' folder,
for example.
\item \textbf{Force re-open on ping}\\
This forces Mahogany to close and re-open the mailbox when trying
to update the information about it. This is required for some broken
servers to correctly detect new mail. Usually this should not be needed.
\item \textbf{Anonymous access}\\
This marks the folder as anonymous, such as for anonymous IMAP access,
telling Mahogany that no user name or password are required to access
it.
\item \textbf{Use Secure Sockets Layer (SSL)}\\
This option is only available if your copy of Mahogany was built with
SSL support. Tick this box to access a secure IMAP/POP/NNTP server.
It must, of course, be supported by the server side, too. It will
ensure that your communication with the server is encrypted and safe
from eavesdropping. For this to work, the user might also need to
open the preferences dialog, and, in the \textbf{Misc} tab, fill-out
the boxes labeled ``Path where to find shared libssl'' and ``Path
where to find shared libcrypto''. Linux users must also see the SSL
section of the FAQ.
\item \textbf{Folder can be accessed without network}\\
This option is only useful if you use Mahogany dial-up support - then
check it to tell Mahogany that you don't need your Internet connection
(and thus don't want to dial your ISP) to access this folder.
\item \textbf{Can be opened}\\
This is usually checked for the normal folder but may be unchecked
for the folders which only contain subfolders (see also below) but
not any messages. Normally you should allow Mahogany detect this itself,
this checkbox is only here to allow you to override Mahogany if it
does something wrong.
\item \textbf{Contains subfolders}\\
Select this if the mailbox represents not a mailbox or newsgroup but
a hierarchy on an IMAP or NNTP server. E.g. comp.os.linux.announce
would be a normal newsgroup (unticked), while comp.os.linux would
be a new hierarchy (ticked). Normally you should allow Mahogany detect
this itself, this checkbox is only here to allow you to override Mahogany
if it does something wrong.
\item \textbf{Hide folder in tree}\\
If you do not want this mailbox to be shown in the folder tree (unless
you select the option to show all hidden folders), tick this box.
For example, if you move all new mail from your POP3 folder to your
INBOX you probably don't need to show POP3 folder in the tree at all
so you may want to hide it to save valuable screen estate.
\item \textbf{Folder subtype}\\
Here you can select some sub-type, e.g. different mailbox formats.
This option cannot be changed after the folder creation.
\item \textbf{Icon for this folder}\\
Allows you to set a different icon for the mailbox.
\end{itemize}

\subsection{Folder Views\_2002\_}

\label{FolderView}A Folder View is a window or part of a window displaying
the contents of a mail folder or a newsgroup. It consists of two parts:

\begin{itemize}
\item The list of message headers at the top, showing message subjects,
authors, dates, etc.
\item The contents of the currently selected message below.
\end{itemize}

\subsubsection{Understanding the folder view}

The messages are displayed in the folder view according to the curent
sort order which may be changed either from the folder properties
dialog (of course, it can be set independently for each folder or
be the same for all folders at once) or by clicking on the column
header. In the latter case, clicking on, for example, \noun{{}``Subject{}''}
column, will sort the messages by subject if they were not sorted
by subject already, otherwise it will sort them by subject in the
reverse order. This allows you to sort the listing on some column
by just clicking it and to reverse the sort order by clicking it again.

Most of the columns are self explanatory. It should be mentioned that
the date format is configurable from the folder view page of the folder
properties dialog and you may set it to anything you like. In particular,
some people find it very useful to show the date in GMT instead of
the local time.

The status column (which is usually the first one, although you may
change the column order from the same page already mentioned above)
may be empty or contain one or more flags:

\begin{tabular}{|c|c|}
\hline
Symbol&
Meaning\\
\hline
\hline
{*}&
message is flagged or important\\
\hline
A&
message was answered to\\
\hline
D&
message is marked as deleted and will disappear after expunge\\
\hline
U&
message is unread: you haven't seen its body yet\\
\hline
R&
message is recent: this is the first time you see it\\
\hline
N&
message is new: it is recent and unread\\
\hline
\end{tabular}

Accordingly, if nothing appears in the status column, the message
was read but wasn't deleted nor flagged and this is not the first
time you see it. Note that not all kinds of folders support all kinds
of flags: while IMAP servers always do, POP servers are not capable
of storing the message flags and so all messages will always appear
as new in them.

Note that each message flag has also the corresponding colour which
is used to highlight the message in the folder view and also to highlight
the folder containing this message in the folder tree. These colours
can be changed from the folder view page of the options dialog, as
usual.


\subsubsection{Keyboard and mouse handling}

The reaction to a mouse click in the list of messages depends on the
preferences setting {}``Preview message when selected{}``. When
the option is selected, a single mouse click will select the message
and load it into the preview window. If the option is not set, the
message will only be selected but not previewed automatically, which
is very useful for accessing mail folders through a slow connection.
The same setting effects the behaviour of the space bar, it acts exactly
like a single mouse click in the window and will only cause a message
to be previewed if a single mouse click is configured to do so. The
space key can be used to view the message under the current cursor.

Other keyboard bindings are summarized in the following table:

\vspace{0.3cm}
{\centering \begin{tabular}{|c|c|}
\hline
Key&
Action performed\\
\hline
\hline
{*}&
mark/unmark message under cursor\\
\hline
SPACE&
preview message under cursor\\
\hline
D or DEL&
mark selected messages for deletion\\
\hline
U&
remove deletion mark from selected messages\\
\hline
X or \#&
expunge messages marked for deletion\\
\hline
C&
copy marked messages to another folder\\
\hline
M&
move selected messages to another folder\\
\hline
S&
save marked messages to files\\
\hline
P&
print marked messages\\
\hline
R&
reply to messages\\
\hline
F&
forward messages\\
\hline
O&
open messages in separate window\\
\hline
H&
toggle display of all headers\\
\hline
BACK/PG UP&
scroll the message preview one page up\\
\hline
PG DOWN&
scroll the message preview one page down\\
\hline
Ctrl-U&
view next unread message\\
\end{tabular}\par}
\vspace{0.3cm}

Note that all commands for which it makes sense operate either on
the current message only if there is no selection or on all selected
messages at once. You can use the mouse or the cursor arrows together
with the SHIFT or CTRL keys to select multiple messages at once. The
commands which affect the message preview are inactive if no message
is previewed.


\subsection{Migrating from another mail client}

\label{Import}\emph{Mahogany} supports importing the settings from
a few other popular mail clients. The current list includes Netscape,
Pine, XFMail and Eudora. Depending on the mail client only part of
its settings may be imported but in the best case Mahogany can import
the address books, the configuration settings, the filter rules and
the list of folders to use. To use this feature, choose \noun{{}``Mail|Import...{}''}
command and follow the dialogs.

Even if you don't find your email client in the list proposed in the
dialog, everything is not lost. You won't be able to import its configuration
information nor the filter rules but you might still recuperate the
address book information if your program can export the addresses
in the standard comma separated format or as vCards. In either case
you can then import just the address books from the address book editor.

Finally, \emph{Mahogany} can automatically create the entries in the
folder tree for all MBOX (standard Unix format, also used by Eudora)
files under the given directory. To do this, select the folder in
the tree which you want the new folders to appear under and choose
\noun{{}``Folder|Import folder tree...{}''} command.


\section{Reading Mail}


\subsection{The INBOX Folder}

\label{INBOX Folder}The folder named INBOX has a special meaning.
It is the main system mailbox and cannot be deleted or renamed. All
new mail will arrive in here. At present, Mahogany leaves all messages
in the system inbox. Mahogany will collect mail from several different
incoming mailboxes, e.g. the INBOX and some additional POP3 accounts,
and move them to a new folder.


\subsection{The {}``New Mail{}'' Folder}

\label{New Mail Folder}Created by Mahogany the first time you start
it, this is a file mailbox which by default receives all new mail.
If you mark any folder as incoming, its contents will be checked regularly
and any new mail in it moved to the {}``New Mail{}'' folder. If
you do not like this name, you can change it in the preferences dialog.
Mahogany should in all situations recover from closed connections
or disappearing mailboxes, so it is safe to let it run over long periods
of time. If a server connection times out, you will receive one or
possibly a few error messages but Mahogany will reopen the connection
and continue as usual.


\subsection{Other Folders}

The folders are organized in a tree structure: this is purely for
the convenience of the user, so any folder may contain as many other
folders as needed. Folders can be managed either from the top level
menu or from the popup menu in the folder control invoked by pressing
the right mouse button in it. You can group folders together by making
the sub folders of another folder. This builds no physical connection
between the folders but makes the sub folder inherit certain configuration
defaults settings from their parent folder. We will soon add a {}``folder
group{}'' folder type not representing any mailbox but just being
a group of folders.


\subsection{Accessing Mail Remotely}

Mahogany supports two protocols for accessing remote mail servers:
POP3 and IMAP. While POP3 is more commonly available, IMAP is definitely
the superiour protocol and should be used where available. It will
generally give you more functionality and will be much faster over
slow connections. Both normally require you to log in with a username
and password, but can be configured to work anonymously if supported
by the server. IMAP additionally allows you to access any mailfolder
file on the remote machine. For example, if you use Mahogany on a
remote machine {}``\texttt{atwork.company.com}{}'', you might have
your local \texttt{INBOX} (which could be \texttt{/var/spool/mail/MyUserName}
on a unix box) and also your {}``New Mail{}'' folder, which usually
is {}``\texttt{\textasciitilde{}/.M/New Mail}{}''. With IMAP, if
you log in from home, you can not only access your INBOX on the atwork.company.com
mail server, but also the {}``\texttt{New Mail}{}'' folder there,
by telling Mahogany to use {}``\texttt{/home/MyUserName/.M/New Mail}{}''
as the path to the mailbox file. Like this, you can access any mail
folder on that machine that you have access to locally, making remote
access to your mail much more flexible than just accessing your new
messages.


\subsection{Filters}


\subsubsection{\label{Filters}Overview}

Mahogany has powerful builtin filters. The filters are written in
a real (albeit small and specialized) programming language but there
is also GUI support for creating them. All the existing filters appear
in the dialog shown by the {}``Filters rules{}'' command of the
{}``Edit{}'' menu. You can also access the filters configured for
a specific folder by selecting {}``Filters{}'' from the {}``Folders{}''
menu. The difference between these dialogs is that not all filters
are associated with all folder, i.e. you may have two filters and
two folders but the first folder can use only the first filter rule
and the second - only the second one. The global {}``Filter rules{}''
dialog allows you to manage all the filters but after creating a new
one you still must associate it with some folder or folders for it
to be useful.

After creating some filters you may go to the {}``Filters{}'' dialog
of the {}``Folder{}'' menu (you will also have an opportunity to
go directly there immediately after the filter creation) and check
the filters you would like to use for this folder. The filters are
applied in the order in which they appear in the list, so use the
up and down buttons to arrange them as needed: the order of filters
is important because if one filter had decided to move a message to
another folder the subsequent filters won't process this message at
all.


\subsubsection{Filter Rule Editor}

This dialog allows you to edit an individual filter. You may use the
different controls to compose it, note the {}``More{}'' button which
allows you to add a new condition to the rule. You may notice that
when you change something in the upper part of the dialog, the text
in the lower part is updated to reflect it: this text is the source
of the filter program which Mahogany will apply. By experimenting
with the dialog controls it should be easy to see the different possibilities
of this language. In a few words, it is a C-like language which has
several built-in functions for testing for the various conditions
and performing some actions. All of the usual C operations are supported.

You may also edit the filter program text directly but be warned that
it will be impossible to use the GUI controls to modify it then because
they are not flexible enough to be able to express an arbitrary filter
program.


\subsubsection{Quick Filter}

There is another, quicker, way to create filters as well: this is
done with {}``Quick filter{}'' command from the {}``Message{}''
menu or the popup menu displayed when you right click the message.
It allows to easily create filters for the most common cases. Note
that you may update the filter rule later using the full-fledged filter
edit dialog if you decide to add more conditions to it, for example.


\section{Sending Mail}


\subsection{To: CC: and BCC: Settings}

All of these fields accept either mail addresses, aliases or folder
names. Aliases must be expanded by using the tabulator key or the
Expand button next to the fields. If multiple entries match the text,
you will be prompted with a list to choose from.


\subsubsection{Using Folder names as an address}

Folder names can be entered by prefixing them with a hash ('\#') sign.
This will cause a copy of the message to be saved in the folder with
this name. If no such folder exists, it will be created in the mail
folder directory. For example, entering {}``joe.user@foo.com, \#myMail{}''
in the To: field, will send the mail to Joe User and save a copy of
it in the folder {}``myMail{}''. Note, that if you have your folders
organised hierarchically, you must specify the full path to the folder
in the folder tree control. An example: If you have a group of folders
in the tree, called {}``Work{}'' and want to save a copy of the
message to the folder {}``TODO{}'' which is a sub-folder of {}``Work{}'',
you need to add {}``\#Work/TODO{}'' in the address field. Instead
of using the To: field for this, you can also use CC: or BCC:, there
is no difference.


\subsubsection{To:}

The primary address to which to send the message, multiple addresses
can be entered and must be comma-separated.


\subsubsection{CC:}

CC means Carbon Copy - copies of the message will get sent to the
addresses listed here.


\subsubsection{BCC:}

BCC means Blind Carbon Copy - like CC:, copies will be sent to the
addresses listed here, but the addresses will not be stored in the
mail header. This allows you to send copies without other recipients
of the message knowing about it.


\subsection{Key Bindings in the Message Editor}

\vspace{0.3cm}
{\centering \begin{tabular}{|c|c|}
\hline
Key&
Function\\
\hline
\hline
ALT-D&
delete word\\
\hline
CTRL-Y&
delete line\\
\hline
CTRL-U&
delete to begin of line\\
\hline
CTRL-K&
delete to end of line\\
\hline
CTRL-C &
copy selection to clipboard\\
\hline
SHIFT-INSERT&
\\
\hline
CTRL-X&
cut selection to clipboard\\
\hline
SHIFT-DELETE&
\\
\hline
CTRL-V&
paste text from clipboard\\
\hline
CTRL-INSERT&
\\
\hline
CTRL-S&
search for text\\
\hline
CTRL-T&
search same text again\\
\hline
\end{tabular}\par}
\vspace{0.3cm}


\subsection{Using the address book\_3100\_}

Although you may directly enter the addresses of recipients of your
message into the different address fields ({}``To:{}``, {}``Cc:{}``
and {}``Bcc:{}`` although the last two are optional and so might
not appear), there is a more convenient way to do it using the address
book. To insert an address fromyour address book you should type the
first few letters of either the {}``nick name{}'' (or the {}``alias{}'')
for this address or the the first letters of the e-mail address and
press <TAB> key or click on the {}``Expand{}'' button. If there
is only one possible expansion for the letters you have typed, Mahogany
will automatically replace them with the corresponding full e-mail
address. Other possible cases: either there are no matches at all
and a message in the status line of the window will tell you so, or
there are more than one match in which case you will be presented
with a choice of all possible completions.

\emph{Hint:} if you press <TAB> immediately after the address expansion
it will bring you to the next text entry zone and will not attempt
the address expansion the second time.

A special feature of the address expansion is the so-called {}``group
extension{}'': if you type the first few letters of an address group
name (see {}``Address Book Editor{}'' description for more about
it) it will be replaced by the addresses of all the addresses in this
group. So, for example, if you have a group called {}``Friends{}''
you may type {}``fri{}'' in the {}``To:{}`` text entry zone and
after pressing <TAB> it will be replaced by the e-mail addresses of
all your friends.


\subsection{The Mail Composition Window\_2100\_}

\label{MailCompositionWindow}The composition window's appearance
depends on your configuration settings (\ref{ComposePage}). Generally,
it will at least show text entry fields to specify who to send the
message to, for the subject and a large editing window below for the
actual message itself. It also features an EXPAND button next to the
address field, which allows you to lookup addresses in the currently
loaded addressbooks. If you type in the beginning or a substring of
a name, alias or email address and either press the expand button
or the tabulator key, Mahogany will look up a list of matching addressbook
entries and either expand it directly or prompt you with the matching
choices. This works for the main address field ({}``To{}'') as well
as for the carbon copy addresses ({}``CC{}'' and {}``BCC{}'').
If you specify an address in the {}``CC{}'' or {}``BCC{}'' fields,
these people will receive a copy of the message. The difference between
them is that the list of addresses in {}``CC{}'' is included in
the message, while the {}``BCC{}'' (blind carbon copy) addresses
will be suppressed in the message keeping them anonymous. If you enter
an address like {}``\#myfolder{}'', Mahogany will interpret it as
the name of a mailfolder and save a copy of the message to that folder
(in this case {}``myfolder{}'').


\subsection{The News Article Composition Window\_2101\_}

This window is essentially identical to the mail composition window
(\ref{MailCompositionWindow}), but instead of specifying a mail address
to send the message to, you can enter one or more newsgroups names
(comma separated). The newsserver used depends on from where this
window was opened, if it was opened while reading a specific newgroup,
it will use the same newsserver that the newsgroup was read from,
otherwise it will fall back to the setting in the global preferences.


\section{Understanding program options}

One of the goals of the Mahogany project is to be as configurable
as possible. Of course, it means that Mahogany has a lot of options
- however we hope that it doesn't make the program more difficult
to use because you have the complete liberty to ignore all options
until you need to use them. Moreover, some program options are completely
transparent to the user because they are automatically remembered
by the program. All the other ones may be changed from the main options
dialog which may be invoked from the main window toolbar or from the
menu. Generally, Mahogany configuration settings are inherited in
a logical fashion. The settings in the preferences dialog are the
global default settings and can be overridden on a per-folder basis.
Subfolders inherit from their parent folders. Currently there is no
full GUI support for this, but the next release will have the full
set of program options available on the per-folder basis. Currently
you can already achieve this by editing the configuration file manually.
Also, system administrators can provide other defaults in a global
/etc/Mahogany.conf file (also found in /usr/etc, /usr/local/etc, /opt/etc,
...).


\subsection{Automatically remembered options}

These options include the sizes and the positions of all windows,
the texts of all prompts, the positions of splitters in the main program
window and the other folder views as well as several other things.
These options are special in that they do not appear in the options
dialog and so can not be changed directly - instead Mahogany remembers
them each time it is shut down, so when it is reopened it will be
in exactly the same state as during the last run. Try to play with
it: adjust the sizes of the main program window and the splitters
in it as you like, exit Mahogany and restart it (this is for testing
only, of course, you do not need to do it each time!) - you should
see that the window reappears on the same position (although this
might not work under some window managers), has the same size and
is split in the same manner.


\subsection{Other options}

All other options except those mentioned in the previous subsection
can be changed from the program options dialog. This dialog has several
pages which are described in more details below:


\subsubsection{Identity page\_4102\_}

\label{IdentityPage}%%disabled!\begin{figure}{\htmlimage{scale=1}\centering\epsfig{file=pics/Identity.eps,width=0.6\textwidth}}\end{figure}

Here several important settings are configured, so it is advised (as
the program itself will tell you when it is run for the first time)
to set them up before starting using Mahogany. These include your
personal identity settings - see also your preferred mail and news
servers which is configured from the network page (\ref{NetworkPage}).

\begin{itemize}
\item \textbf{Username}\\
This is used as (default) login name for the accounts which require
one (POP3 or IMAP4) and also as the base for the return address unless
it is overridden by explicit setting of the return address.
\item \textbf{Hostname} \\
This is used as the default hostname for your username. If you do
not specify a return address, this must form a valid mail address
when used together with your username.
\item \textbf{Reply address} \\
Here you can specify a return mail address where you want to receive
mail and replies to your mails from other users. By using this you
can hide your original (possibly {}``uglier{}'') return address.
\item \textbf{Reply return address from To: field}\\
If set, Mahogany will use the original \texttt{To:} address field
values for the \texttt{Reply-To:} header entry of any message replies
that you send. This makes sure that the same person sending you mail
will always see the same mail address for you. It is especially useful,
if you collect mail from several different incoming mail folders.
An example: Someone sends you mail to \texttt{John.Doe@mycompany.com}.
If you reply to this message, it will appear as coming from \texttt{John.Doe@mycompany.com},
even if you read this mail from home, on a machine called \texttt{MyBox.fun.org}.
On the other hand, if someone sends you mail to \texttt{MyAlias@writeme.com},
your reply will carry that as a return address, so that person will
never know about your \texttt{mycompany.com} office address.
\item \textbf{Personal name}\\
 Your full personal name to be included in your address.
\item \textbf{\label{UserLevel}User level}\\
Setting it to advance will allow you more detailed configuration of
Mahogany, allowing you to make changes to the configuration which
might be confusing to a novice user. It's recommended that you first
become familiar with the program before changing the value of this
option.
\end{itemize}
\label{NetworkPage}%%disabled!\begin{figure}{\htmlimage{scale=1}\centering\epsfig{file=pics/Network.eps,width=0.6\textwidth}}\end{figure}

This page allows you to configure the network-related settings. Please
notice that the four server names (for POP3, IMAP4, SMTP and NNTP)
are only the default values and that Mahogany can use as many different
servers (in particular, POP3 and NNTP) as you wish - for this, it
is just enough to change the server name when creating a new folder
from the default value specified here.

\begin{itemize}
\item \textbf{POP server}\\
This is the default server for your POP3 mail folders.
\item \textbf{IMAP server}\\
This is the default server for your IMAP mail folders.
\item \textbf{SMTP server}\\
This is the server used for sending outgoing mail, please ask your
system administrator if you don't know its name. This option is disabled
if {}``Use local mail transfer agent{}'' is checked.
\item \textbf{NNTP server}\\
This is the server used for reading USENET newsgroups and posting
news articles.
\item \textbf{TCP Timeout Values}\\
These timeouts are used for all accesses to remote servers. Generally
it is a good idea to set them to small values to avoid unnecessary
delays if something goes wrong. On the other hand, you want to make
sure that they are long enough for slow connections, like for example
through a modem line. If you get a lot of error messages about failed
accesses to remote servers, you should try to increase these settings.

\begin{itemize}
\item \textbf{TCP Open Timeout} \\
This setting decides after how many seconds the attempt to open a
connection to a remote mail or newsserver will time out. I.e. if no
connection can be made within this time interval, the request will
fail.
\item \textbf{TCP Write Timeout} \\
If the attempt to write data to a remote server takes longer than
this, it will fail.
\item \textbf{TCP Read Timeout} \\
If the attempt to read data from a remote server takes longer than
this, it will fail.
\item \textbf{TCP Close Timeout} \\
If the attempt to close the connection to a remote server takes longer
than this, it will fail.
\item \textbf{TCP Rsh Timeout} \\
If the attempt to open a remote shell connection (used for some mail
operations) to a remote server takes longer than this, it will fail.
\end{itemize}
\end{itemize}

\subsubsection{\label{NewMailPage}New Mail Page\_4110\_}

This page looks slightly differently in the global preferences dialog
and in the folder properties one as some of the settings here must
be the same for all folders while the others can only be set for a
specific folder. First here is the list of the settings which appear
in the global dialog:

\begin{itemize}
\item \textbf{Execute new mail command}\\
You may specify a command to execute when new mail is received.
\item \textbf{Play a sound on new mail}\\
You can select a sound file to be played on new mail reception.
\item \textbf{Show new mail notification}\\
If this option is on, Mahogany will show a message about the new mail
in the log window
\item \textbf{Ping folder interval}\\
This setting specifies how often should the currently opened folder(s)
be updated. It is typically smaller than the poll interval below because
it is faster to check an already opened folder, especially when it
is a remote folder.
\item \textbf{Poll interval}\\
How often should Mahogany update the mail folders which it monitors
in the background
\end{itemize}
In addition to these settings, the folder {}``New Mail{}'' properties
page also proposes you the following settings:

\begin{itemize}
\item \textbf{Configure filters}\\
This button gives you access to the filters dialog. Please see the
corresponding manual section (\ref{Filters}) for more details
\item \textbf{Collect new mail from this folder}\\
If checked, all new mail detected in this folder (either automatically
or manually) not handled by the filters will be copied or moved to
another folder, normally the central {}``New Mail{}'' folder. You
may change the destination folder if you are in advanced user mode.
Of course, copying the new mail to a local folder from remote server
may be time consuming so it may be worth to set the filters deleting
the unwanted spam messages for this folder to avoid downloading them.
\item \textbf{Leave mail in this folder}\\
If this checkbox is checked, the new mail will be copied to the {}``New
Mail{}'' folder and also left in this folder. Otherwise it will be
moved to {}``New Mail{}'' and deleted from this folder.\\
This option is often called {}``Leave mail on server{}'' in the
other email clients.
\item \textbf{Permanently monitor this folder}\\
Choose this to tell Mahogany to poll this folder in the background
periodically (the interval may be set below). If you leave it unset,
you can still trigger new mail detection (including applying filters
to it and/or downloading it from server) by either opening the folder
or updating it ({}``Open{}'' and {}``Update{}'' commands in the
{}``Folder{}'' manu respectively)
\item \textbf{Poll folder at startup}\\
If on, Mahogany will check for new mail in this folder immediately
after the program launch. Of course, if you have many permanently
monitored folders this can make the program startup quite slow.
\end{itemize}

\subsubsection{\label{ComposePage}Compose Page\_4100\_ }

On this page you may configure different settings which control the
behaviour of the message composer (it is also used when replying or
forwarding mail messages, not only for composing the new ones).

\begin{itemize}
\item \textbf{Save sent messages}\\
If enabled, Mahogany will keep a copy of each message you send.
\item \textbf{Folder file for sent messages}\\
Where you want Mahogany to save the copies of sent messages.
\item \textbf{Wrap margin}\\
If set to a value greater than zero, the message editor will wrap
lines for you at that margin. It is recommended to set it at number
less than 75, otherwise the lines in your mail messages might become
too long to be conveniently read.
\item \textbf{Reply string in subject}\\
The prefix for subject lines in message replies, usually set to {}``Re:{}``
\item \textbf{Collapse reply marker}\\
Mahogany can collapse multiple reply markers (such as {}``Re:{}``)
into one in three different ways:

\begin{itemize}
\item no : do not collapse reply markers
\item collapse : collapse them into one
\item count : collapse them into one and add a counter for the reply level,
such as {}``Re{[}2{]}:{}``
\end{itemize}
\item \textbf{Quote character}\\
The text inserted before each line of the quoted message when replying.
\item \textbf{Use signature}\\
If enabled, Mahogany will append the contents of your signature file
to each message sent.
\item \textbf{Use signature separator}\\
If enabled, your signature will be separated from the text with two
dashes. This is a common Internet/Usenet convention.
\item \textbf{Use XFace}\\
XFaces are small black and white bitmaps which can be added to the
message header to identify the sender. Mahogany will recognise and
display them if enabled. It will also attempt to load your XFace from
the file specified and send it with messages you write. If you do
not have your own XFace file, Mahogany will use its own default XFace.
\item \textbf{XFace file}\\
This file must contain a 48x48 pixel black and white image. Most image
formats should be recognised, XPM is recommended. If the file cannot
be loaded, the default XFace will be substituted.
\item \textbf{Mail alias substring expansion}\\
If enabled, the EXPAND button will search the mail address databases
using substring search rather than just comparing the text against
the beginning of addresses and aliases. Produces many more matches
than the default search and might take a bit longer.
\item \textbf{Font family, font sizes, foreground colour, background colour}\\
These settings determine the appearance of the composition window's
message editor.
\item \textbf{Configure headers}\\
Allows you to specify default values for the To:, CC: and BCC: fields
and whether to display them in the compose view or not. Hint: you
may want to configure the folder where you collect all messages from
some person (or the mailing list) to have this persons reply address
default value for the {}``To:{}`` field.\\
\\
The dialog shown will also allow you to edit the custom headers for
outgoing messages (i.e. add arbitrary additional headers) if the user
level (\ref{UserLevel}) is set to {}``Advanced{}''.
\end{itemize}

\subsubsection{Folders page\_4107\_}

\begin{itemize}
\item \textbf{Folders to open on startup}\\
Mahogany will open these folders on program startup.
\item \textbf{Folder opened in main frame}\\
This specifies the folder to open in the main frame on program startup.
It will be automatically remembered each time you exit Mahogany.
\item \textbf{Poll for new mail delay}\\
Mahogany will check all incoming mailboxes for new mail. Specify the
time between checks in seconds here. Notice that each check causes
a short delay as Mahogany polls the folders, set it to a longer value
to reduce the annoying screen updates, set it to a shorter value if
you care about receiving your new mail with little delay.
\item \textbf{Ping/check folder interval in seconds}\\
Mahogany checks periodically whether the opened folders are still
{}``alive{}'' (a folder may become dead if, for example, the remote
server goes down or the network link fails).
\item \textbf{Automatically select first message in viewer}\\
If enabled, Mahogany will automatically select and display the first
message in the message viewer whenever you open a folder. This can
be inconvenient if you want to just look at headers without downloading
messages over a slow link.
\item \textbf{Threshold for displaying progress dialog}\\
Mahogany will display progress dialogs when parsing mail folders or
querying servers. If the number of messages is less than this threshold
value, the progress dialog will be suppressed - play with this setting
and set it to the value which doesn't show the progress dialogs which
disappear too quickly, but still shows them if the operation lasts
a long time.
\item \textbf{Create "folder internal data" message}\\
Mahogany normally creates hidden message entitled "don't delete this
message - folder internal data" to store its private data. This is done
only with Unix mailbox and MMDF formats, because other formats have
built-in mechanisms for storing folder properties. This allows Mahogany
to provide extra functionality, but it confuses new mail notification
programs and it looks ugly in mail software that doesn't support it.
Unchecking this option prevents Mahogany from creating new such messages
and you can delete previously created messages using text editor. Keep
in mind many other programs can create such messages and this option
applies only to Mahogany.
\end{itemize}

\subsubsection{Python page\_4103\_}

(only if you have a Python-enabled version of Mahogany)

\label{PythonOptions}

\begin{itemize}
\item \textbf{Enable Python}\\
Enables the built-in python interpreter which can be used to extend
Mahogany. It is not essential for normal operation, but if you want
to do unusual things, python gives you the power to do practically
anything you want with the program.
\item \textbf{Python Path}\\
Where to search for python files.
\item \textbf{Startup script}\\
The name of a python script which will be executed at program startup.
\end{itemize}

\paragraph{Callbacks}

Callbacks are python functions that can be called from different parts
of Mahogany's code. See the Scripting and Extending chapter (\ref{Scripting})
and the Hacker's guide (\ref{HackersGuide}) for more information
on this.

\begin{itemize}
\item \textbf{Folder open callback}
\item \textbf{Folder update callback}
\item \textbf{Folder expunge callback}
\item \textbf{Flag set callback}
\item \textbf{Flag clear callback}
\end{itemize}

\subsubsection{Message Viewer\_4101\_}

\begin{itemize}
\item \textbf{\label{MessageViewerPage}Preview message when selected}\\
 When this option is set, any message that gets selected in the list
of messages will get pre-viewed automatically. If using a modem connection,
it makes sense to disable it, so messages will only get loaded and
pre-viewed when double-clicked upon or when the 'V' key is pressed.
By default, this is enabled, so that clicking on a message or pressing
the spacebar to select it, will also pre-view it.
\item \textbf{Font family, font size, foreground colour, background colour,
colour for URLs, colour for header names, colour for header values}\\
These settings control the appearance of messages in the message viewer
window. Mahogany will detect URLs embedded in messages and by using
a different colour for them, can highlight them. When the user clicks
on a URL, it will be opened in an external browser.
\item \textbf{Inline graphics}\\
If enabled, Mahogany will display images included as MIME content
in the message window. If disabled, images will be represented by
a filetype icon like any other MIME content.
\item \textbf{Conversion graphics format}\\
Mahogany uses an external conversion program (\ref{HelpersPage})
for image formats which it does not support natively. Here you can
chose one of the natively supported formats to use for the conversion.
At present, the most reliable format appears to be XPM. If configured
properly and all libraries are available, Mahogany should support
XPM, PNG, JPEG and BMP. Notice that XPM files are extremely large,
so you might want to change this setting to one of the other formats.
\item \textbf{Support special fax mailers}\\
This enables support for domains sending faxes by email, such as the
\htmladdnormallinkfoot{EFAX}{http://www.efax.com/} fax to email gateway.
Faxes are sent as MIME attachments and need treatment different from
normal images.
\item \textbf{Domains sending faxes}\\
This is a colon-separated list of domains sending faxes. All IMAGE/TIFF
or APPLICATION/OCTET-STREAM MIME content in mails coming from these
domains will be treated as TIFF-G3 faxes. Note that the strings in
this field do not need to be real domain names but are substrings
looked for in the sender's email address.
\item \textbf{Maximum size of message}\\
If you attempt to view a message larger than this limit, Mahogany
will prompt you for confirmation. This is to prevent you from accidentally
downloading large messages over a slow remote connection. Setting
it to 0 will disable this. The limit is not applied to mailfolder
files.
\item \textbf{Maximum number of messages}\\
If you open a folder with more than this limit of messages, Mahogany
will ask you whether you want to limit the amount of messages downloaded
(or partially downloaded). Again, this is to prevent you from accidentally
downloading huge numbers of messages over a slow remote connection.
Setting it to 0 disables this. It does not apply to mailfolder files.
Also, for NNTP connections, this might be triggered although there
could be less messages in the newsgroup, as at the time of testing
the number of unread messages is not know yet.
\item \textbf{Configure headers to show}\\
This allows you to chose from a list of the most commonly viewed header
lines, which you would like to display together with the message contents.
By default, To:, From:, Subject: and Date: are shown. Note that you
can always view the complete header information or the raw message
text, no matter what you chose here.
\item \textbf{Configure Date Format}\\
This will pop up a sub-dialog (\ref{date_format_dialog}) for setting
the format for displaying dates.
\end{itemize}

\subsubsection{Addressbook page\_4104\_}

Mahogany may automatically remember all addresses from all e-mail
messages you receive (actually, only those which you read). This is
called \emph{address autocollection} and, as almost any other feature
of Mahogany can be turned on and off as desired. In this page you
may choose whether you want to use this feature at all (it is on by
default) and, if so, where should be the autocollected addresses be
put and other settings. See the Addressbook section (\ref{AddressDatabase})
for more information on Mahogany's built-in addressbook.

\begin{itemize}
\item \textbf{Autocollect addresses}\\
You may choose {}``No{}'' to disable autocollecting addresses completely,
or choose {}``Yes{}'' to always autocollect them. The remaining
option, {}``Ask{}'', means that you will be presented with a message
box each time an address is about to be autocollected.
\item \textbf{Address book to use}\\
You may enter the path of the address book to use for autocollected
addresses. Although you may use any address book for this, it is probably
better to have a special address book for all autocollected addresses.
If the path name given here is an absolute one, it is used as is.
Otherwise, it is considered to be relative to your Mahogany directory.
For example, the default for this option is {}``autocollect.adb{}''
and so the default autocollect book will be created in \noun{}\\
\noun{\$HOME/.M/autocollect.adb} \noun{}\\
under Unix.
\item \textbf{Ignore addresses without names}\\
You may with to autocollect only addresses which have a full name
- in this case you should check this option. If it is off and the
address has no name, the first part of e-mail address (the one preceding
the '@' symbol) will be used instead of the name.
\end{itemize}
In addition to its own built-in addressbook format, Mahogany also
supports the addressbook files of the BBDB addressbook used with Emacs
(see \ref{BBDB}). Some settings can be set here which apply only
to the BBDB addressbook support:

\begin{itemize}
\item \textbf{Ignore entries without names}\\
BBDB can store entries which have only an e-mail address with them,
but no name. If you set this option, Mahogany will discard such entries.
\item \textbf{Generate unique aliases}\\
Setting this option allows Mahogany to ensure that all aliases are
unique. If two entries have the same alias, one of them will be modified
to distinguish them. This is especially useful in conjuction with
the following option. If this option is set, reading in of BBDB addressbooks
is slowed down considerably. However, setting it once, then saving
the addressbook and disabling it, will make sure that all aliases
are unique without slowing down subsequent loading of the addressbook
the next time it is used.
\item \textbf{Name for nameless entries}\\
If Mahogany finds entries without a name and is not set to ignore
it, this name will be used for such entries. It can be combined with
the option to generate unique aliases.
\item \textbf{Save on exit}\\
As saving BBDB addressbook can potentially lead to some loss of information
in the original database file (BBDB and Mahogany support different
fields), you can choose whether you want Mahogany to automatically
save the data on exit or ask you for confirmation. Read section \ref{BBDB}
for more details about how BBDB and Mahogany differ in interpreting
the database.
\end{itemize}

\paragraph{Helpers\_4106\_}

\label{HelpersPage}On this page you can customise which external
helper applications Mahogany uses for different action that it does
not perform itself.

\begin{itemize}
\item \textbf{Open URLs with}\\
Mahogany will use the program listed here to open URLs embedded in
email messages. If you want to use Lynx as your Web browser you should
prefix it with {}``xterm -e{}'' under Unix in order to open Lynx
in a separate window. For example, you may use \noun{xterm -t Lynx
-e Lynx.}
\item \textbf{URL browser is Netscape}\\
If the browser used to open URLs belongs to the family of Netscape
programs, tick this box. Instead of calling a new browser each time,
Mahogany will tell the already running Netscape process to load the
new URL. Also, don't forget to clear it if you use another browser
- otherwise it will fail to start up.
\item \textbf{Help viewer}\\
The program listed here will be used to view the online help system
in HTML format. Any simple HTML viewer can be used here.
\item \textbf{Help viewer is Netscape}\\
Just like the option for the URL browser, this will take talk to an
already running Netscape process instead of opening a new one each
time.
\item \textbf{External editor}\\
This is the external editor which will be invoked if you choose {}``External
editor...{}'' from the compose view menu. You should use the {}``\%s{}''
characters to indicate the place where the file name will be inserted
in the command line (if you don't do it, an implicit {}``\%s{}''
will be added to the end of the string).
\item \textbf{New Mail Command}\\
The line in this field will be executed whenever Mahogany receives
new mail. This can be used to play a sound to notify the user of incoming
messages, or do something else to alert him.
\end{itemize}

\subsubsection{Miscellaneous\_4105\_}

All options which don't fit in any other pages are collected here.

\begin{itemize}
\item \textbf{Show log window}\\
If this option is on, the log window showing all program messages
will be displayed during program execution. It is advised to leave
it on because the log messages (which can be saved to a file from
the log window menu) can be valuable for the bug reports.
\item \textbf{Debug server and mail folder access}\label{debugoption}\\
This is another troubleshooting option: please turn it on if you experience
any mail-related problems (either sending or receiving). It slows
down the program a lot but allows to see what exactly is going on
between the client and the server and this can be of great help sometimes.
\item \textbf{Splash screen on startup}\\
If this option is on, a splash screen is shown on startup. It will
go away when clicked with the mouse or when a given delay (see the
next item) expires.
\item \textbf{Splash screen delay}\\
The delay after which the splash screen disappears.
\item \textbf{Autosave delay}\\
This option allows to automatically save all program settings (but
not messages being composed so far) each time the given delay (in
seconds) passes. It can be disabled by setting the delay to 0, but
it is advised to leave it enabled - so that your changes to the program
configuration will be always saved.
\item \textbf{Confirm exit}\\
If this options is on, you will be asked whether you want to leave
the program each time before exiting. The checkbox on the message
box with this question can be used to change the value of this option
as well.
\item \textbf{Click folder to open\label{clicktoopen}}\\
If this option is on, it is enough to select (for example, by clicking
on it) a folder in the folder tree control in the main window to open
it in the integrated folder view. Double clicking the folder or choosing
{}``Open{}'' from the popup menu will open folder in a separate
window. This approach has a drawback of being a little slow with either
very big folders or on slow machines/network connections, so an alternative
way is to uncheck this checkbox. Then double clicking a folder will
be needed to open it in the integrated folder view - while {}``Open{}''
popup menu item will still open it in a separate window.
\item \textbf{Always run only one instance}\label{onlyoneinstance}\\
If this option is on and you launch another instance of Mahogany, i.e. execute
it again while another copy of it is still running, the control will be given
to the already running instance instead of launching another one in parallel.

This is especially useful when Mahogany is configured as your default mail
client as otherwise another copy of it would have to be opened each time when
you start writing a new message.
\item \textbf{Format for the date}\\
This controls how the dates are shown in the folder view window. The
string here has the same format as an argument to strftime(), on a
Unix system you may execute \noun{man strftime} to see them all.
\item \textbf{Show new mail notification}\\
If this option is on, a message box will be shown each time new messages
are received.
\item \textbf{Path where to find AFM files} (Unix version only)\\
To properly scale printing under Unix, Mahogany needs access to a
set of AFM files. The searchpath where to look for them can be modified
here.
\item \textbf{Remote configuration synchronisation settings}\\
Please refer to the section below for a detailed explanation.
\end{itemize}

\subsection{Remote configuration synchronisation\_4109\_}

Mahogany can automatically save a subset of its configuration settings
in a mailbox at program exit and automatically retrieve that information
the next time it is started up. This option becomes useful if you
are using the program from different systems, e.g. if sometimes from
the office and some other times from home over a dialup link. In this
case, you can save some settings in a special IMAP folder and tell
the program to use this for some of the settings. Like that, you can
share the program settings no matter from where you run Mahogany and
you do not need to manually adjust both configurations.

To use this option, first create a folder on an IMAP server. Do not
use a POP3 server, as the program cannot store information via POP3,
IMAP is required for this to work. Then, activate the {}``Sync options
with remote server{}'' setting and choose which settings you wish
to share. Currently supported are:

\begin{itemize}
\item \textbf{Sync Filter Rules}: This keeps the global list of all filter
rules synchronised via the IMAP folder. Very useful if you want to
use the same set of filter rules no matter where you run Mahogany.
\item \textbf{Sync Identities}: This keeps the list of available identity
settings synchronised. Be careful: some things such as server settings
might cause problems if they are used on a machine with different
network settings.
\item \textbf{Sync part of the folder tree}: This allows you to synchronise
a complete sub-tree of the mailbox/folder tree. Activate this and
pick a group of folders from the tree (Click on the {[}>\,{}>{]}
button to choose one.) and this tree of folders will be available
no matter from where you run Mahogany. Note: this only makes sense
if the folder group contains networked folders which are accessible
from both machines. It synchronises configuration information, not
folder contents. So you cannot access a mailbox file residing on one
machine via this mechanism, but you can share configuration entries
for remote mailboxes, such as IMAP, POP3 or newsgroups.
\end{itemize}

\subsection{Some Other Dialogs You May Encounter}


\subsubsection{Date Format\_4220\_}

\label{date_format_dialog}The dates of messages for the list of headers
can be displayed in a format of your choice. The same format is used
for inserting the current date in templates when writing messages.
The format of the date is controlled by a list of format specifiers
(as accepted by the \texttt{strftime()} function in the c-library).
Most of the available format specifiers are available via a little
popup menu which appears if you press the right-mouse button in the
input field.


\paragraph{Display time in GMT/UST}

If you tick this box, all times will be displayed in Greenwich Mean
Time (= Universal Standard Time) rather than local time. If not checked,
all dates and times will be displayed in your own timezone. \textit{Note
that the time and date displayed is not the local time in the sender's
timezone but the time it was in your local timezone when the message
was sent.}


\subsubsection{Message Sorting Dialog\_4210\_}

Here you can choose the criteria for sorting mailfolder listings.
If you want to use message score as a sort criterium, you need to
have a plugin module loaded which provides the {}``Scoring{}'' interface.
At time of writing no such plugin is available, it will appear soon,
though.


\paragraph{Use Threading}

If you tick this box, all messages will be threaded, i.e. sorted in
hierarchical orders, with replies following earlier messages in the
same discussion thread.


\paragraph{Re-Sort on status change}

The effect of this option feels a bit strange at first and you might
not like it. If selected, the messages will be re-sorted each time
the status of a message changes. If you sort messages by message status
and delete a message, it will immediately drop to the bottom of the
list. Useful to always maintain a strict sorting order, but can be
confusing.


\subsection{Mahogany Plugin Modules}

\label{Modules}Mahogany can load plugin modules at runtime to extend
its functionality. Currently we are working on plugins to supply PGP/GPG
encryption support and a scoring engine for sorting mailfolder listings.
A plugin to use IBM's ViaVoice will be started work on as soon as
the Debian/Linux {}``Potato{}'' release becomes stable.

Generally, if you want to write an extension for Mahogany without
using Python (which we hope to turn into a plugin, too, soon), you
can do that very easily by writing it as a plugin module. Get in touch
with the developers and we will show you how to do so.


\subsubsection{The Plugin Module Configuration Dialog\_4200\_}

This dialog allows you to decide which plugins get loaded at program
start. At present, modules don't get loaded/unloaded at runtime, so
you need to restart Mahogany for these options to take effect. On
the top left you see a list of all modules that Mahogany has found
in either the global \texttt{modules} directory or in your local directory
(\texttt{\$HOME/.M/modules/}). The window below shows some information
about the module currently selected in the list, such as the name,
author, a description of what it does and the name of the interface
it provides. The interface would e.g. be {}``Scoring{}'' for the
plugin providing the functionality for scoring messages and is used
by the program to find the right plugin for a given operation.

\textbf{Any changes to the plugin module settings will only take effect
after you re-started Mahogany!}


\section{The Address Database\_3000\_\label{AddressDatabase}}

Mahogany has a built-in address book system with flexible support
for different addressbook formats. It can easily expanded to handle
other programs' file formats and at present supports three formats,
it's own ADB format (\ref{ADB}), (X)Emacs' BBDB (\ref{BBDB}) address
book format, and simple one address per line file (\ref{LineADB}).
Generally the address books are ordered hierarchical,
with the possibility to order entries in groups and sub-groups in
a tree-like fashion. Alias expansion is configurable and also handles
group names, to expand to the full list of email addresses within
that given group.


\subsection{The native Address Book \_3001\_}

\label{ADB}This is Mahogany's own address book format, offering you
the maximum set of functionality supported by the address book editor.
It offers hierarchical grouping of address entries and it also the
default address book format used by the address auto-collection mechanisms,
which uses different groups for address entries collected from different
mail folders.


\subsection{The Address Book Editor\_3200\_}

To edit the address book, open the address book editor. If the book
is already present in the address book tree on the left side of the
window, you may expand it (and any subgroups it might have) and start
editing immediately. If not, you must first add it to the tree by
choosing {}``New..{}'' from the {}``Book{}'' submenu or using
the corresponding toolbar button.

Generally speaking, there are several ways to perform the same action
in the address book editor:

\begin{enumerate}
\item use the menus: the commands for creating and deleting address book
entries are in the {}``Edit{}'' menu, the corresponding commands
for the address books - in {}``Book{}'' one.
\item use the toolbar: this may be more convenient because, depending on
the current position of the selected item in the tree it will propose
to create either an address book or an entry.
\item use keyboard: <INSERT> key creates a new entry or address book if
the current selection is the root of the tree, <DELETE> deletes an
item and <Alt-ENTER> brings up the {}``Properties{}'' dialog.
\end{enumerate}
To edit the entry, simply select it in the tree. The data associated
to it is spread over several notebook pages - select the one which
contains the field you want to change and change it. If you want to
undo your changes, simply press {}``Cancel{}'' at any moment - however,
this only works while you're editing the entry. As soon as you pass
to another one, all previous changes are saved and cannot be undone
any more. The changes are saved automatically when you select another
entry or close the address book editor - there is no special {}``Save{}''
button.

To quickly move in the address book tree you may use either the {}``Find{}''
or {}``Go to{}'' dialogs (both available in the {}``Find{}'' menu).
The first dialog allows you to find the entry by its contents while
the second one allows you to quickly go to the entry (in thecurrent
address book only) if you know its nickname. In the {}``Find{}''
dialog you have several options to configure the search: it may be
either case sensitive or not (should {}``mike{}'' match {}``Mike{}''?)
and try to find only the whole string or just the substring of it
(should {}``mik{}'' match {}``Mike{}''?). You may also choose
among which fields should the search be done. You may choose as many
fields as you like (possibly all of them) but you must choose at least
one.

After you used the {}``Find{}'' dialog once, you may choose the
{}``Find next{}'' menu item to go to the next address book entry
matching your search criterium (notice that a message in the status
bar will notify you about how many matches, if any, were found). Keep
hitting {}``Find next{}'' until the search wraps to the beginning
(again, watch the status line for the message) or until you find the
entry you're looking for.

You may import your existing address book file by choosing the {}``Import
book...{}''entry from the {}``Book{}'' menu - this will open the
address book import dialog proposing you to select the


\subsection{Support for BBDB Address Books\_3002\_}

\label{BBDB}Mahogany supports reading and writing of BBDB address
book files. BBDB is the Big Brother DataBase used with the Emacs family
of editors. If you have an existing address book file, usually called
\texttt{.bbdb}, you can load it into Mahogany and use it. This is
especially useful if you have an existing file with auto-collected
email addresses that you want to continue to use.


\paragraph{Caution:}

The BBDB address book format supports different fields than Mahogany's
native database. When reading a BBDB file, Mahogany will only read
the first two addresses and telephone numbers and assign them to the
{}``Home{}'' and {}``Work{}'' addresses and phone numbers. All
additional addresses and phone numbers, the AKA list and the comments
will get lost. Mahogany will only save the information displayed in
the address editor window. Currently saving of phone numbers to BBDB
files is unsupported as it uses a different format from Mahogany.
\textit{Therefore, reading a BBDB file and saving it back to disk
may lead to a loss of information!}


\subsection{One Address per Line File Address Books\_3002\_}

\label{LineADB}This is probably the simplest possible address book format.
It is useful for integration with external programs and scripts. Addresses
are stored without name and angle brackets. Mahogany doesn't attempt to lock
the file, so care must be taken when writing to it from both Mahogany and
external program.


\subsection{Support for Palm Address Books}

\label{PalmADB}\emph{Mahogany} does currently support reading of
Palm Addressbooks (referring to a {}``Palm{}'' we mean the handheld
organizer Palm Pilot running PalmOS). For being able to do that it
is required to include the PalmOS-Module (see below). The support
of Palm Addressbooks is not yet fully implemented, as so far it is
only possible to download the addresses from the Palm and to display
them. Changing and uploading changed/new addresses to the Palm is
something we plan to add in the next release.

To display the Palm addressbook, create a new addressbook of type
{}``PalmOS{}''. You will be asked to put your Palm into the cradle
and to push the HotSync-button. After the download the addressbook
is accessible in read-only mode. Restarting \emph{Mahogany} requires
to download the addressbook again.


\chapter{Scripting and Extending \textsl{Mahogany\label{Scripting}}}


\section{Python Scripting}


\subsection{Introduction}

\textsl{Mahogany} has an embedded Python interpreter, if compiled
with Python support enabled. Python is an object-oriented script language
which can be used to write scripts to be executed by \textsl{Mahogany}
or even to extend \textsl{Mahogany}'s functionality. Python scripts
have full access to all internal Mahogany data structures and objects.

A number of user definable callback functions are available. Scripts
have access to most objects living in Mahogany. Scripting can be disabled
in the Preferences dialog (see \ref{PythonOptions}).

Currently the scripting support is quite basic. If you are interested
in writing scripts and need additional callbacks or support for them
within \textsl{Mahogany}, please get in touch with the developers
who will be happy to add it.


\subsection{Initialisation }

At startup, \textsl{Mahogany} will load a file called \texttt{Minit.py}
and call the \texttt{Minit()} function defined in there, without any
arguments.


\subsection{Callback Functions (Hooks)}

There are a number of callbacks available which will be called from
different places within \textsl{Mahogany}. These are defined in the
header file \texttt{Mcallbacks.h}. There is no documentation for these
callbacks yet, but don't hesitate to ask us if you need more information
about this. All of these callbacks are called with at least two arguments:

\begin{enumerate}
\item The name of the hook for which the function got called, e.g. \texttt{FolderOpenHook}
\item A pointer to the object from which it was called. E.g. for \texttt{FolderOpenHook},
this would be a pointer to a \texttt{MailFolder} object. This object
does not carry a useable type with it and needs to be converted in
the callback, e.g. if the argument is called \texttt{arg} and the
object is a \texttt{MailFolder}, the object must either be used as
\texttt{MailFolder.MailFolder(arg)} or be converted as \texttt{mf
= MailFolder.MailFolder(arg)}.
\item Some callbacks have a third argument. This is either a single value
or a tuple holding several values.
\end{enumerate}

\subsection{Namespaces}

To avoid repeatedly typing in the name of the module (\texttt{MailFolder}
in this case), it can be imported into the global namespace with {}``\texttt{from~MailFolder~import~{*}}{}''.
By default modules are not imported into the global namespace and
must be explicitly named.


\subsection{List of Callbacks}

\vspace{0.3cm}
{\centering \begin{tabular}{|c|c|c|c|c|}
\hline
0 8 1 0 0 0 00 8 1 0 0 0 0Callback Name&
Object Type&
Additional Arguments/Types&
Return Value&
Documentation\\
\hline
\hline
FolderOpenHook&
MailFolder&
&
void&
Called after a folder has been opened.\\
\hline
FolderUpdateHook&
MailFolder&
&
void&
Called after a folder has been updated.\\
\hline
FolderSetMessageFlag&
MailFolder&
(long) index of message&
1 if changing flags is ok,0 otherwise&
Called before changing flags for a message.\\
\hline
&
&
(string)name of flag&
&
\\
\hline
FolderClearMessageFlag&
MailFolder&
(long) index of message&
1 if changing flags is ok,0 otherwise&
Called before changing flags for a message.\\
\hline
&
&
(string) name of flag&
&
\\
\hline
FolderExpungeHook&
MailFolder&
&
1 to expunge, 0 to abort&
Called before expunging messages.\\
\hline
FolderNewMailHook&
MailFolder&
&
1 to suppress default message, 0 else&
Called when new mail arrived in folder.\\
\hline
GlobalNewMailHook&
mApplication&
(string) sender of mail&
1 to suppress default message, 0 else&
Called when new mail arrived anywhere.\\
\hline
&
&
(string) subject of mail&
&
\\
\hline
\end{tabular}\par}
\vspace{0.3cm}


\subsection{Supported Classes}

Python has access to Mahogany's internal class hierarchy. At present
we supply interface definitions and Python modules for only a small
number of classes, however if there is need for more classes being
supported, we can easily extend the list - please ask us if you want
more support!

Some automatically generated documentation of the Python interface
to Mahogany classes can be found in the \htmladdnormallinkfoot{doc/Python directory}{../Python/}.
Documentation about all classes, including those not available to
Python, can be found in the \htmladdnormallinkfoot{doc/classes directory}{../classes/}.


\section{Plugins}


\subsection{Introduction}

Starting with release 0.5, \emph{Mahogany} allows the use of plugins
(modules). This allows for an easy and comfortable way to enlarge
\emph{Mahogany}´s functionality. These modules can be loaded at runtime
and do not need to be part of the main executable.


\subsection{The Filters Module}

This module provides a filtering language for Mahogany. It allows
you to have Mahogany look at different message properties, such as
message contents, size or header lines and execute arbitrary action
on them. The most common use would be to sort mails from different
mailing lists in corresponding mailfolders, to reduce the number of
messages in your main incoming mailbox. Filters can be specified in
three possible ways:

\begin{itemize}
\item You can use the filters dialog. This is the most convenient and best
supported option.
\item You can write them by hand, using a simple programming language remotely
similar to 'C', and put the filtering rules directly into the Mahogany
configuration file or registry.
\item You can write complex rules yourself, save them to a file and tell
Mahogany to read the rules from that file.
\end{itemize}
The normal way to set up filters is to specify them in the filters
dialog (\ref{FiltersDialog}) and then tell Mahogany folder which
of the filter rules to use for the individual folders with athe folder
filters dialog (\ref{FolderFiltersDialog}).


\subsubsection{\label{FiltersDialog}The Filters Dialog\_4260\_}

This dialog allows you to define any number of filter rules available
to Mahogany. In a seaparate dialog (\ref{FolderFiltersDialog}) you
can then pick any rule from the list and assign it to a folder. As
you can have different sets of rules for each folder and might want
to share rules for some folders, this dialog simply sets up rules
and you can later specify for which folders to use them. When editing
or adding a new filter rule, you will get to the following dialog:


\subsubsection{The Filter-Rule Dialog\_4261\_}

This dialog allows you to set up or edit an individual filtering rule,
it contains of the following components:

\begin{itemize}
\item The rule name, in the text entry field at the very top. This name
is only to help you remember what the rule does and will appear in
the list of rules in the main Filters Dialog, but is without any further
significance.
\item Underneath the name, you find the text {}``If Message...{}'' followed
by at least one row of conditioncontrols.
\item Under the condition controls you find the text {}``Then do this:{}``
followed by some action controls.
\end{itemize}
You can add more pattern matching controls by pressing the {[}More{]}
button, and you can delete the last pattern matching rule by pressing
the {[}Less{]} button. The number of actions to execute is fixed to
one.

You can use several condition and connect them via logical AND and
OR, optionally negating them by ticking the {[}Not{]} box. The following
conditions can be tested for at present:

\begin{itemize}
\item Always - this rule will always be executed
\item Contains - check if the text next to it is contained in the message
component selected
\item Match - check if the message component selected is exactly this text
(case independent)
\item Match Case - check if the message compent selected is exactly this
text (case dependent)
\item Match RegExp - check if the message compent selected matches the regular
expression specified
\item Larger Than - check if the message is larger than this in KByte
\item Smaller Than - check if the message is smaller than this in KByte
\item Older Than - check if the message is older than this many days
\item Newer Than - check if the message is newer than this many days
\item Is SPAM - check if the message originates from a system blacklisted
as sending unsolicited emails (SPAM).
\item Python - execute the text in the box in the built-in Python interpreter
and proceed if it returns a non-0 result.
\end{itemize}
The possible actions which can be performed, are:

\begin{itemize}
\item Delete - deletes the message
\item Copy to - copies the message to the folder specified
\item Move to - moves the message to the folder specified
\item Expunge - expunge all messages in this folder
\item MessageBox - open a message box dialog with the text specified
\item LogEntry - add the text specified to the log window
\item Python - execute the text specified in the built-in Python interpreter
\end{itemize}
If you are not using a Trash folder, it is a good idea to add a rule
at the end of the list of filtering rules, that always expunges all
messages. For testing filters, you can leave that rule disabled, an
all messages will get treated and marked as deleted, but stay around.
Only when expunge is executed, will they really disappear in the original
mailbox. Notice, if you are using a Trash folder, this does not apply,
as messages won't be marked as deleted but moved straight to Trash.


\subsubsection{\label{FolderFiltersDialog}The Folder Filters dialog\_4262\_}

This dialog allows you to assign filter rules to a folder. You can
pick them from the set of existing filter rules (set up via the Filters
Dialog (\ref{FiltersDialog})) and change the order of the rules.
The listbox on the left lists the existing filtering rules for the
currently selected folder in the order in which they are executed.
You can use the buttons to change the order or rules. You can also
activate/deactivate rules by clicking on the litte checkbox ({[}X{]}
or {[} {]}) next to their name.

If you want to apply rules to all incoming messages and are collecting
mail from different servers, simply apply the rules to the {}``New
Mail{}'' folder if you have one, alternatively you can set up rules
for individual servers or INBOX.


\subsection{The PalmOS Module}

When 3Com released its first PalmPilots several years ago, many people
did not believe in a success. But they were proven wrong, the Palm
Pilot (or short: Palm) is today the most used handheld organizer.

For all the people possessing one of those´s little helpers, the PalmOS
Module allows (or will allow) for an easy integration of the Palm´s
data in Mahogany. In future releases there will be full support for
addressbook synching, schedules etc. Currently you can only view the
Palm´s addressbook (see above) and use \emph{Mahogany} as your Palm
desktop software.


\subsubsection{Desktop functionality}

As there is not really a common Palm desktop in the Unix/Linux environment
(not like under MS Windows), we thought it a nice idea to include
the desktop into \emph{Mahogany}. Therefore \emph{Mahogany} does allow
to

\begin{itemize}
\item create backups of the Palm´s databases using the {}``Backup{}''
function
\item restore the previously backup-ed databases using the {}``Restore{}''
function
\item install new files to the Palm using the {}``Install{}'' function
\end{itemize}
To use this functionality, you must of course have the PalmOS module
enabled. You can access the functions via the Plugin menu. In addition
to the above mentioned tasks, you can specify quite a lot of options
to adapt for instance the backup process to your personal needs.

There is an additional function not mentioned yet, labelled {}``Synchronize{}''.
Via the configuration dialog you can specify what should happen during
synchronization - starting with mail exchange, backups and automatic
installations. Read the following section about the configuration
dialog to get see how you can customize your PalmOS-Module.


\subsubsection{The configuration dialog\_10011\_}

You can configure the PalmOS module via the Plugin menu in a lot of
ways. Let´s go through every single item in the configuration dialog
which you can access using the Plugin-Menu:

\begin{description}
\item [Synchronise~Mail]When you have this enabled, you can specify a mailbox
which will be used as place of exchange for mails. Mails in this folder
will be transfered to the Palm at the next hotsync and the outbox
of the Palm´s mail program will be send. This mailbox is also used
as a configuration setting for messages sent. \emph{Mahogany} will
use the properties of this mailbox when sending the messages retrieved
from the Palm's Outbox. If you have enabled the {}``advanced user{}''
option in the program preferences' identity tab, you can set up a
separate return-address or completely different options for this mailbox
and therefore have the mail sent from the PalmPilot with different
settings as those sent normally. The options for user name and return
address as set on the Palm are ignored when mails are sent with \emph{Mahogany}.
\item [Mailbox~for~Exchange]Enter here the name of the mailbox that should
be used for mail exchange when you have the {}``Synchronise Mail{}''
feature enabled (see above).
\item [Mail~disposal~mode]This specifies what to do with outgoing e-mails
retrieved from the PalmPilot and sent. You have three options:

\begin{itemize}
\item file : move messages from Outbox to Filed mailbox on the Palm
\item delete : delete messages after sending
\item keep : keep messages in Palm's Outbox
\end{itemize}
\item [Always~do~Backup]Setting this checkbox to true will make a backup
take place every time you {}``Synchronize{}''.
\item [Directory~for~backup~files]This field does contain a valid directory
path where the PalmOS-Module will store the backup of your Palm´s
databases.
\item [Delete~no~longer~existing~backups]This checkbox determines whether
you want files to be deleted on the PC that are residing in the backup
directory but are not any longer on the Palm. This makes it possible
to really keep the backup identical to the Palm, but has the disadvantage
that you might loose data if you (accidently?) delete important data
on the Palm and do a backup, as the backup-ed databases will be deleted
too. So think carefully whether you do really want to do this.
\item [Make~incremental~backup~only]Enable this checkbox if you only
want to make an incremental backup. Using this features will speed
the backup process up, as only changed or new databases are downloaded
from the Palm.
\item [Backup~all~databases]Enabling this checkbox will make the PalmOS-Module
ignore the backup flags of the databases. By default the PalmOS-Module
does only backup files with a set backup flag. Use this option if
you want all files to be backup´ed.
\item [Exclude~these~databases]Here you can specify a comma separated
list of databases (without spaces!) that should not be backup´ed.
\item [Do~auto-install]Using this feature enables the auto-install feature
and everytime you {}``Synchronize{}'' the module will check the
auto-install directory for Palm databases. If databases are found
they will be installed and deleted without further notice!
\item [Auto-install~directory]Specify here a directory where the files
to be auto-installed can be found.
\end{description}
Besides that, some general options are available:

\begin{description}
\item [Pilot~device]Here you can specify the device where the Pilot is
residing (this ought to be /dev/pilot under Unix/Linux and Com1: or
Com2: under MS Windows (not yet supported)).
\item [Connection~speed]You have the choice beetween different hotsync
speeds ({}``connection speed{}''), measured in baud.
\item [Try~to~lock~device]You can force a lock of the above set device
by enabling {}``Try to lock device{}''
\end{description}

\subsubsection{Accessing the Palms}

There is the {}``general{}'' approach to get the Palm databases
on your computer and the more selective one. For the first one, just
use the {}``Synchronize{}'' menu point in the plugin menu. Depending
on what you have enabled in the configuration dialog (see above),
different actions will be taken (backup, mail exchange, ...).

If you only want to update your backup or to install a file or to
restore your Palm´s contents, you can access these functions individually
by using the corresponding menu points in the plugin menu.


\chapter{Getting Help and Support}


\section{Troubleshooting\label{Troubleshooting}}

Before asking for the help on our mailing lists, please try to see
if you cannot fix, or, at least, understand the reasons of, the problem
yourself. It is difficult to list everything which could go wrong
here but here are some basic recommendations:

\begin{itemize}
\item (Unix) If the program doesn't compile, please make sure you use GNU
make. If it still doesn't help, please let us know about it but don't
forget to include the compilation errors log (if there are too many
errors, there is no need to include all of them, just the few first
ones). If the problem has happened at configure time, please look
at config.log file configure created and include it in your report.
\item (Unix) If the program crashes mysteriously please make sure you don't
have incompatible and/or different versions of the program sources,
headers and modules. Also, please check that you have only one version
of wxWindows installed. Also, make sure to rebuild everything (ideally,
create a new build directory) after installing or uninstalling a new
wxWindows or Mahogany version. If the problem still persists, please
try building the debug version of the program (you need debug wxWindows
library and run configure with {\tt -{}-enable-debug switch}), run it under
\noun{gdb} and send us the output of {}``bt{}'' command in the
debugger when it crashes.
\item If your problem is related to receiving or sending mail, please look
at the message log window for possible explanation. If you don't see
the log window, make sure it wasn't disabled in the {}``Miscellaneous{}''
(last) page of the preferences dialog - and reenable it if it was.
If there is nothing helpful in the log window, please turn on {}``Debug
server and mailbox access{}'' option in the same page. It may also
be useful to enable logging to a file if the program crashes as the
file contents, unlike the log window, is not lost in this case.
\end{itemize}

\section{WWW Support}

Mahogany has a home on the world wide web where you can get up to
date information about development and the last releases. Come and
visit us at the \htmladdnormallinkfoot{Mahogany Homepage}{http://mahogany.sourceforge.net/}


\section{Mailing Lists}

Several mailing lists exist to contact the developers, to receive
updates of new releases and to exchange information and experiences
with other users. Please visit the \htmladdnormallinkfoot{Mahogany Project Page}{http://sourceforge.net/projects/mahogany}for
more information and to join the lists.

If you want to help further development of Mahogany, please go to
the same place and you will find all the information you need about
how to contribute or how to contact us.


\chapter{Advanced Usage}


\section{Compiling \textsl{Mahogany} from source}

For detailed information on how to compile Mahogany yourself and how
to change it or get involved in its development, please refer to the
Hackers' Guide, included either in the \htmladdnormallinkfoot{online docs}{../HackersGuide/index.html}
or on the \htmladdnormallinkfoot{Mahogany Web page}{http://mahogany.sourceforge.net/docs.html}.

Some quick notes about common compilation problems can be found in
the FAQ, in section \ref{CompileErrors}.


\section{Using \textsl{Mahogany} more efficiently}

This section contains assorted tips about how you can make \textsl{Mahogany}
run faster.


\subsection{Speeding up \textsl{Mahogany} startup}

Unix users only: \textsl{Mahogany} accesses the file \noun{\textasciitilde{}/.M/config}
which stores all program options on startup. If this file is located
on a slow partition such as a network disk (NFS), the startup time
can be reduced just by moving it elsewhere and creating a link to
it from \noun{\textasciitilde{}/.M} directory.

You can choose to not open any folders at startup ({}``Folders{}''
page of the options dialog) if doing this takes too long in your case.
Also, remember to close the address book editor window if you don't
want it to be reopened the next time you run \textsl{Mahogany.}


\subsection{Limiting Amount of Data Transferred\label{limitdatatransfer}}

When using a remote server, especially over a slow link (such as a
modem), it may be undesirable to automatically retrieve all messages
from the server. Mahogany provides several options to help you with
limiting the amount of data transferred.

First, you should probably disable the {}``Open folder at single
click{}'' and {}``Preview message when selected{}'' options from
the {}``Message View{}'' and {}``Miscellaneous{}'' pages of the
options dialog to avoid accidentally open a folder or a message.

Second, there are several useful settings in the {}``Folders{}''
page. Note that they can be set for each folder separately so you
can only choose to change the default values for some slow servers
but keep the original values for all the other ones. These options
allow you to specify a threshold for message size: before downloading
a message of size bigger than the specified (in Kb), you will be asked
for the confirmation.


\chapter{FAQ - Frequently Asked Questions\_1002\_}

Being a brand new program, this section is currently pretty empty.
However, we will constantly update this chapter with questions received
on the mailing lists.


\section{Installation Problems}


\subsection{All Mahogany icons show a question mark}

\textit{I'm a linuxuser (redhat) who just found Mahogany and really
likes it, but I have a problem, I can't get all the widgets to work,
the pictures on the buttons and the ones before the mailboxes all
appear as an questionmark. Do I need some library to make it look
like your screenshot? If you would assist me in this matter I would
be very grateful.}

It depends how you installed it. If the icon with the question mark
appears, it means that Mahogany didn't find its installation directory
with the icons. If you installed the linux version from the .tar.gz
with the binary, it should go into /usr/local or a similar place and
you should have the icons in /usr/local/share/M/icons. If they are
not there, Mahogany cannot find them. If you have installed it in
a different location, Mahogany should ask you for the installation
(\char`\"{}global Mahogany directory\char`\"{}) when you start it
for the first time.

If you have compiled it yourself, make sure you do a \char`\"{}make
install\char`\"{} or \char`\"{}make install\_all\char`\"{} (of which
parts might fail, depending on your setup), to install everything
in the right place. If you just grabbed the binary of the daily snapshot,
you need to have a working Mahogany installation as well or it won't
get the icons. You do not need any additional library, Mahogany handles
xpm files internally.


\subsection{How do I unpack the compressed files?}

The distribution files for Solaris and some of the other ones are
in compressed tar format, having the ending \texttt{.tar.gz} . To
unpack them you need \texttt{gzip} and \texttt{tar}. Change to the
directory where you want to install Mahogany, e.g to \texttt{/usr}
or \texttt{/opt} or \texttt{/usr/local} and issue the following command:

\begin{quote}
\texttt{gzip -dc < thedistributionfile | tar xvof -}
\end{quote}
Where \texttt{thedistributionfile} is the complete path to the file
you downloaded. You will need to have proper write access to the directory
where you install it and \texttt{tar} should show you a list of all
files being installed as it unpacks them.


\subsection{Compiling aborts with errors}

\label{CompileErrors}A common problem with compiling wxGTK and Mahogany
is, that you need to follow the instructions in Mahogany's README
file and use the configure script to set them up as explained. If
you use different arguments for configure than those shown in README,
things will not work! Also, before running configure again, remove
any {*}.cache and {*}status files in the working directory or configure
will re-use some old settings.

Also, as we are omitting some unused subdirectories from the wxGTK
source, to save you download time, you may need to run {}``make -k{}''
rather than just {}``make{}'' to get it to ignore some errors caused
by this. On non-Linux/GNU systems, you need to use the GNU make utility,
i.e. {}``gmake{}'' rather than the default {}``make{}''.


\subsection{Mahogany fails to find wxWindows, configure fails}

The following steps should identify and solve the problem:

\begin{enumerate}
\item Do a \char`\"{}make install\char`\"{} for wxWindows and watch the
output, it should copy lots of things to /usr/local/....
\item Do a \char`\"{}which wx-config\char`\"{}, it should report wx-config
to be in /usr/local/bin
\item Just type \char`\"{}wx-config -{}-cxxflags\char`\"{}, it should run
the wx-config script and report the compiler flags, which should include
something like \char`\"{}-I/usr/local/include\char`\"{}.
\item Then go to the Mahogany directory and \char`\"{}rm {*}cache{*}\char`\"{}
to remove old configuration info and run ./configure
\item This {*}should{*} find wx/wx.h if all of the above worked, if not,
look at the end of config.log to see what went wrong.
\item If it does not find the wxWindows library, you need to add /usr/local/lib
to either your LD\_LIBRARY\_PATH or to /etc/ld.so.conf (and run /sbin/ldconfig
as root), then remove {*}cache{*} and try again. Again, if something
fails, look at config.log.
\end{enumerate}

\subsection{SSL does not work}

\textit{I went to the \char`\"{}Miscellaneous\char`\"{} tab in preferences
menu and made sure the pathnames of libcrypto and libssl where correct.
I enabled SSL in the access tab of my mail folder preferences. However,
when I try to open that folder, it fails and the log window talks
about being unable to load libssl.}

Under Linux, this is due to a combination of factors, fixing one of
them is enough to fix the problem. Versions of libssl.so older than
0.9.6 require libcrypto to be explicitly loaded beforehand. Updating
to version 0.9.6 or newer fixes the problem. Versions of libwx\_gtk
older than or equal to 2.2.0 load shared libraries in such a way that,
even though M loads libcrypto, libssl still fails to load. Upgrading
libwx\_gtk to a later version will fix the problem. Finally, if everything
else fails, starting M with the command: {}``LD\_PRELOAD=/usr/lib/libcrypto.so
M{}'' will fix the problem as well. If the second solution is used,
the pathname of libcrypto.so must be set properly. Otherwise it is
better to leave it blank.


\section{Other Problems / Questions}


\subsection{The Preferences Dialog does not show up properly}

\textit{When I set up Mahogany or select the preferences dialog, its
contents do not appear. Sometimes I cannot enter anything in the fields.}

wxGTK has a problem with constraint handling which can cause this
dialog to sometimes get into an endless loop trying to do the layout.
On most windowmanagers it helps if you resize the dialog a little
and it will appear correctly. This seems to depend on the platform
and window manager. Also, wxGTK does not seem to work correctly with
OpenLook which does not allow you to enter anything.

Sometimes there may be some dialog window opened behind Mahogany window
or on another desktop. Please check this (with Alt-Tab) if you think
Mahogany got stuck.


\subsection{How to use Mahogany with fetchmail/procmail?}

\textit{I use fetchmail and procmail to deliver my mail (Redhat Linux).
I'm reading mail with Netscape right now and I want to move to M.
I cannot for the life of me get M to open my mail when it loads. I
have to open them manually. Can someone please help me to get M to
open all of my Linux Folders at startup.}

You should be able to right-click on the folder treecontrol on the
left of the main screen and \char`\"{}Create a new folder\char`\"{}.
Make it of type \char`\"{}file\char`\"{} and specify the path to the
the folder file as the filename. Your normal mailspool /var/spool/mail/username
is available under the name INBOX anyway, but I guess you have fetchmail/procmail
deliver your mail to some other place.


\subsection{Does Mahogany have group aliases?}

Mahogany supports alias expansion for individual entries and for groups.
There are two ways in which you can expand an alias to a group of
addresses:

\begin{itemize}
\item The quick and dirty approach: Create an addressbook entry and simply
list multiple, comma separated, addresses in its Email field. Mahogany
will use the whole contents of this field when expanding aliases.
\item The more elegant method: Create a new group in your addressbook and
add the individual addresses as sub-entries of this group. If you
use the group name as a mail alias, Mahogany will expand it to the
list of email addresses of all of its group members. This is more
powerful, as you can easily add and remove entries to sub groups.
\end{itemize}

\subsection{How can I set up POP3/IMAP access?}

\textit{It is not immediately apparent how to set up my POP3 server
under 0.23a , can someone give me a hand, please? It appears there
is no section in the initial configuration utility for this. \label{POP3}}

Mahogany allows you to have as many folders or mail accounts as you
like. That's why it doesn't ask you at the beginning. To add a POP
account:

\begin{enumerate}
\item right click on the folder tree and choose \char`\"{}Create Folder\char`\"{}
\item give the folder a name, set its type to POP3 and fill in the required
fields, such as server and login
\item Click on {[}OK{]}. The folder will now appear in the tree
\item Double-click on the folder to open it.
\end{enumerate}
\begin{itemize}
\item If opening fails, right click on it again and choose \char`\"{}Properties\char`\"{},
make sure that all settings are correct.
\item - If you want Mahogany to collect all mail from that box, you can
tick that checkbox and whenever Mahogany starts, it will open that
box and continue collecting all mail from there and move it to the
\char`\"{}New Mail\char`\"{} folder.
\end{itemize}

\subsection{How can I set up IMAP access?}

Follow the rules for setting up POP3 access\ref{POP3} but set the
folder type to be {}``IMAP folder{}''. Then enter the name of your
IMAP server, your username and password (or leave it empty to be asked
later) for that server and, optionally, the path to the folder on
the IMAP server. You can leave the path empty, and it will use the
default folder (usually INBOX).

If you want to access many IMAP folders on the same server, or a directory
there, you can create foldertree entries representing the IMAP server
itself (i.e. the top-level directory on it) or a directory on the
IMAP server. For these, if not using the Wizard dialog, make sure
that the folder properties dialog has the {}``is directory{}'' checkbox
ticked, which tells Mahogany that it is not a mailbox file to open,
but a directory which can be browsed for entries via the popup menu.


\subsection{Can I have multiple POP3 or IMAP accounts?}

\textit{Can I access multiple different POP3 or IMAP accounts?}

Yes, \textit{Mahogany} allows you to have any number of different
folders configured. Just right-click on the folder tree control and
choose the {}``Create Folder...{}'' option from the popup-menu.
You can then switch between the different folders by selecting them
(usually with a double-click on the tree control) for display in the
main window, or, by selecting {}``Open{}'' from the popup-menu which
will open the folders in their own individual windows.

You can also select the {}``Collect all mail from this folder{}''
option when creating the entries for them (or later, via the {}``Preferences{}''
popup-menu option) to let \textit{Mahogany} automatically check these
accounts for new mail and collect it from there.


\subsection{Can I have multiple identities?}

\textit{Does Mahogany allow me to send email as different people?
That is, if I monitor two IMAP or POP servers, one for my work email,
and one for my home email, can I reply to emails and specify it to
use my home or work email address as the sender?}

Yes, you can set almost {*}all{*} options on a per-folder basis, including
your name or return address, even outgoing SMTP servers to make it
perfect. To have full access to all these configuration options in
the folder properties dialog, you must first set your user level to
{}``advanced{}'' in the main configuration dialog, otherwise only
a small subset of configuration options is available. You can also
create global identities which are available in all folders.


\subsection{Can I run Mahogany as root?}

\textit{Very simple question: can I run Mahogany on a unix system
as the superuser (root)?}

Not directly. There are two problems with it:

\begin{enumerate}
\item It is not a good idea for security reasons. In fact, you should not
even run X11 as root. Though, we would not dare to impose that on
you, if you want to, that is your problem.
\item The technical reason, and this is why Mahogany does not allow it:
The c-client library that we use for accessing mail folders and servers
uses the user-Id 0 (root) internally and does not work when called
as root. When inquiring why this is so, c-client's author told us
that it was bad to read mail as root - he thinks he knows what is
good for you. Unless we find an easy way to circumvent that problem,
you will not be able to run Mahogany as root as we have no time and
desire to re-write the c-client library just for this.
\end{enumerate}
There is a workaround however:

You can forward your email to another user, say {}``\texttt{user1}{}'',
by creating a \texttt{/root/.forward} file containing that user's
name. Then, run Mahogany through the {}``\texttt{su}{}'' command:
{}``\texttt{su user1 -c mahogany}{}''. This will work just fine.
If you get an error message about it being unable to access your X11
display, do a {}``\texttt{xhost localhost}{}'' before, which will
allow all local users to access your display. All this is not very
safe from a security point of view if you don't trust your local machine,
but perfectly fine for standalone or dialup boxes.

Update: Mahogany now runs as \char`\"{}root\char`\"{}.


\subsection{How can I set which language to use?}

Under Unix: simply set and export your LANG environment variable like
for any other program, too. Under Windows: the environment variable
LANG will be recognised if it is set, but in addition Mahogany will
automatically detect which language your system is set to use.


\subsection{How can I delete messages?}

\textit{If I press 'D' or 'Del' or use the menu to delete messages,
they get marked as deleted but never disappear. How can I delete them?}

Simple, press '\#' or 'x' or select Message/Expunge from the menu.
Mahogany will also ask you if you want to expunge them when closing
the folder. If you use the Trash folder, this only applies to that
one as all other folders will move messages straight to Trash instead
of marking them deleted.


\subsection{How can I forward a message with attachments?}

Do \char`\"{}Forward with template\char`\"{} and create a new template
containing \$quote822 - this will forward the entire message. You
can also change the default forward template to do it.


\subsection{How can I customize the position of folders in the tree?}

Unfortunately there is no GUI support for doing it yet. You may vote for the
\htmladdnormallinkfoot{bug 404}
{http://mahogany.sourceforge.net/cgi-bin/show\_bug.cgi?id=404} or subscribe to
it if you want to be notified when this is implemented.


But in the meanwhile you can do it manually relatively simply. Under Unix you
will need to edit the configuration file ({\tt \$HOME/.M/config} by default)
and under Windows you need to directly modify the registry entries (see
\ref{registrykey}). In any case the program shouldn't run when you are
doing this modification.

Here is what you should do: just add {}``Index=N{}'' entry in the folder
profile section of the config file. I.e. if you add the marked lines:

\begin{verbatim}
[IMAP/Inbox]
Index=0                 # added manually
...

[IMAP/Mahogany]
Index=1                 # added manually
...

[IMAP/Junk]
Index=100               # added manually
\end{verbatim}

then Inbox and Mahogany will appear first and Junk last in the tree.

Under Windows you need to add the registry values of type \noun{DWORD} using
the registry editor. For example, the value for Junk folder should be added
under {\tt HKCU$\backslash$Software$\backslash$Mahogany-Team$\backslash$M$\backslash$Profiles$\backslash$IMAP$\backslash$Junk}
key.

\subsection{How can I {}``leave messages on server{}'' (POP3)?}

Typical POP3 server: normally, the new mail is downloaded from the
POP3 folders locally so go to the {}``New Mail{}'' page in folder
properties and select {}``Collect new mail from this folder{}''.
This will move all new mail from the POP3 server to the {}``New Mail{}''
folder. If you want to copy it instead (leave messages on server)
just check the {}``Leave mail in this folder{}'' checkbox as well.


\subsection{Can I have {}``subfolders{}'' of File type (mbox) folders?}

Mahogany tries to preserve some sanity by disabling \char`\"{}Create
new folder\char`\"{} in the popup menu when you select a folder of
a non hierarchical format (such as MBX) but you can still circumvent
this by doing \char`\"{}Folder|Create...\char`\"{} and selecting the
folder you want as the parent.


\subsection{Can I {}``Follow-up{}'' to the message?}

You can open the message in the Sent Mail folder and do \char`\"{}Message|Edit
in composer\char`\"{}. It is sort of like \char`\"{}replying to yourself\char`\"{}
but the to/from fields remain the same.
\end{document}
