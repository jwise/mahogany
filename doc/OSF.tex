%% This LaTeX-file was created by <karsten> Sun Nov 22 18:30:04 1998
%% LyX 1.0 (C) 1995-1998 by Matthias Ettrich and the LyX Team

%% Do not edit this file unless you know what you are doing.
\documentclass[a4paper]{article}
\usepackage[T1]{fontenc}

\makeatletter


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
\newcommand{\LyX}{L\kern-.1667em\lower.25em\hbox{Y}\kern-.125emX\spacefactor1000}

\makeatother

\begin{document}


\title{Compiling M on DEC Alpha with Digital UNIX 3.2c}


\author{Holger Bauer\\ {\small (}\texttt{\small bauer@itsm.uni-stuttgart.de,~http://www.itsm.uni-stuttgart.de/\~{}bauer}{\small )}\small }

\maketitle
\begin{enumerate}
\item First I took the following arguments for configure:\\
\texttt{\small configure~-{}-x-includes=/usr/X11R6/include~-{}-x-libraries=/usr/X11R6/shlib
-{}-with-wxGTK~-{}-without-python}~\\
{\small This would not work since}~\texttt{\small make~dep} {\small still tries
to find}~\texttt{\small Python.h}{\small .}\\
{\small Therefore I created a dummy include file Python.h in}\texttt{\small  \dots}\texttt{\small /M/src/Python}{\small .
This helped to complete make dep. \label{item1}}{\small \par}
\item However step \ref{item1} still reported some warnings:\\
\texttt{\dots}\texttt{/M/extra/src/c-client/mail.h} would complain about a missing
\texttt{linkage.h} header file. Also, a missing \texttt{osdep.h} file was reported.\\
\texttt{\dots}\texttt{/M/extra/src/c-client/osdep.h} falsely pointed to \texttt{os\_gof.h}
but this file was missing. Therefore copied~\texttt{os\_osf.h} to~\texttt{os\_gof.h}.
Also, copied~\texttt{os\_osf.c} to~\texttt{os\_gof.c} since \texttt{osdepbas.c}
pointed to~\texttt{os\_gof.c}. 
\item \texttt{cd~src;}~\\
\texttt{make;}\\
This would fail since swig was not searched for by the configure script. Since
even I gave --without-python to configure make would search in /src/Python and
try to compile things there I decided to install python and swig.
\item The Python-FAQ states that python definitely has to be compiled with the DEC
cc.
\item After that I took:\\
\texttt{\small configure~-{}-x-includes=/usr/X11R6/include~-{}-x-libraries=/usr/X11R6/shlib
-{}-with-wxGTK}~\\
{\small The make process would then stop in}\texttt{ \dots}\texttt{/M/src/adb/AdbFrame.cpp}.
The line 
\texttt{AdbTreeElement~{*}current~=~wxIsPathSeparator(strEntry{[}0u{]})}\texttt{\dots
}would not compile since the wxString function takes a long integer (due to
the 64 bit architecture).\\
This error might disappear if somebody adjusts the wxString library accordingly.\\
In meantime (for my local \texttt{libwx\_gtk.so}) I changed to \texttt{strEntry{[}0{]}}.
\item Then only final linkage errors occured:\\
\texttt{-lpthread} is not known, needs \texttt{-lpthreads}\\
\texttt{-lcrypt} is not known, just omit\\
\texttt{-ldmalloc} is not known, pass~\texttt{-{}-without-dmalloc} to~\texttt{configure}.
\item Because the link process did not give me any error I expected M to run (at least
some kind of unstable). But a core dump appeared immediately.\\
\texttt{dbx} gives to following information:\\
\texttt{(dbx)~run~}~\\
\texttt{signal~Segmentation~fault~at~>{*}{[}mig\_get\_reply\_port,~0x3ff83004a0c{]}
stq~r26,~0(sp)~}~\\
\texttt{(dbx)~where~}~\\
\texttt{>~0~mig\_get\_reply\_port(0xffffffffffffffff,~0xffffffffffffffff,~0xffffffffffffffff,
0xffffffffffffffff,~0xffffffffffffffff)~{[}0x3ff83004a0c{]}~}~\\
The output of \texttt{gdb} is not very appealing:\\
\texttt{(gdb)~run~Starting~program:~/usr3/bauer/src/M/M/src/M~}~\\
\texttt{Program~received~signal~SIGSEGV,~}~\\
\texttt{Segmentation~fault.~0x3ff83008f5c~in~port\_allocate~()}~\\
\texttt{(gdb)~where}~\\
\texttt{\#0~0x3ff83008f5c~in~port\_allocate~()~\#1~0x3ff83004a38~in~mig\_get\_reply\_port
()~}~\\
\texttt{\#2~0x3ff83008f94~in~port\_allocate~()~\#3~0x3ff83004a38~in~mig\_get\_reply\_port
()}~\\
This output runs until infinity \dots.
\end{enumerate}
\end{document}
